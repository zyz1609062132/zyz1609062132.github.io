webpackJsonp([22],{CWCz:function(e,t){},yzmN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),s=a.n(n),i=a("Dd8w"),r=a.n(i),o=a("b8UZ"),l=(a("y1vT"),a("3pLw")),c=a("KBWm"),u=a("z/fv"),d=a("8BiH"),h={computed:r()({},Object(o.b)(["date1","date2","date3"])),watch:{visitDate:function(e){this.$store.commit("date1",e)},holderDate1:function(e){this.$store.commit("date2",e)},holderDate2:function(e){this.$store.commit("date3",e)},agencyDate1:function(e){this.$store.commit("date2",e)},agencyDate2:function(e){this.$store.commit("date3",e)}},data:function(){var e=this;return{initValue:"",cCrmagencyno1:"",cCrmagencyno2:"",cCrmagencyno3:"",cAgencyname1:"",cAgencyname2:"",cAgencyname3:"",activeName:"first",holderDate1:"",holderDate2:"",pickerOptions1:{disabledDate:function(t){return e.holderDate1?t.getTime()>Date.now()||t.getTime()>e.holderDate2:t.getTime()>Date.now()}},pickerOptions2:{disabledDate:function(t){return t.getTime()<e.holderDate1||t.getTime()>Date.now()}},pickerOptions3:{disabledDate:function(t){return e.agencyDate1?t.getTime()>Date.now()||t.getTime()>e.agencyDate2:t.getTime()>Date.now()}},pickerOptions4:{disabledDate:function(t){return t.getTime()<e.agencyDate1||t.getTime()>Date.now()}},agencyDate1:"",agencyDate2:"",visitDate:"",currencyUnit:"100000000",cFundclass:"",sellercode:"",sellercode2:"",sellercode3:"",sellerList:[],holderReportData:[],aggencySellData:[],visitTableData:[],loading:null,page:1,limit:50,totalSize:1,tableHet:500,page2:1,limit2:50,totalSize2:1,tableHet2:500,page3:1,limit3:50,totalSize3:1,tableHet3:500,sortName:"",sortStyle:"",fundScaleStaticObj:{},centerScaleStaticObj:{}}},components:{currencyUnit:c.a,custType:u.a,filterSelect:d.a},mounted:function(){this.initValue=this.$route.query.cAgencyname,this.visitDate=this.date1,this.sellerList=[{key:this.$route.query.cCrmagencyno,value:this.$route.query.cAgencyname}];var e=this.$route.query.cCrmagencyno,t=this.$route.query.cAgencyname;this.sellercode=e||"",this.sellercode2=e||"",this.sellercode3=e||"",this.cAgencyname1=t||"",this.cAgencyname2=t||"",this.holderDate1=this.date2,this.holderDate2=this.date3,this.agencyDate1=this.date2,this.agencyDate2=this.date3,e&&this.getHolderReportList()},created:function(){this.getLocalStorage("unit")?this.currencyUnit=this.getLocalStorage("unit"):this.currencyUnit="100000000"},methods:{getSummaries:function(e){var t=this,a=e.columns,n=(e.data,[]);return a.forEach(function(e,a){0!==a?1!=a?2==a?n[a]=t.numFormat(t.fundScaleStaticObj.beginFAssetSum/t.currencyUnit):3==a?n[a]=t.numFormat(t.fundScaleStaticObj.endFAssetSum/t.currencyUnit):4==a?n[a]=t.numFormat(t.fundScaleStaticObj.fCurpurchaseSum/t.currencyUnit):5==a?n[a]=t.numFormat(t.fundScaleStaticObj.fCurredemptionSum/t.currencyUnit):6==a&&(n[a]=t.numFormat(t.fundScaleStaticObj.fNetPurchaseRedemptionSum/t.currencyUnit)):n[a]="":n[a]="合计"}),n},getSummaries2:function(e){var t=this,a=e.columns,n=e.data,s=[];return a.forEach(function(e,a){if(0!==a)if(1!=a&&2!=a){var i=n.map(function(t){return Number(t[e.property])});if(i.every(function(e){return isNaN(e)}))s[a]="N/A";else{var r=i.reduce(function(e,a){return e+a/t.currencyUnit},0);s[a]=t.numFormat(r)}}else s[a]="";else s[a]="合计"}),s},sortMethod:function(e){e.prop?(this.sortName=e.prop,"ascending"==e.order?this.sortStyle="up":"descending"==e.order?this.sortStyle="low":""==e.order&&(this.sortName="",this.sortStyle),this.getHolderReportList()):(this.sortName="",this.sortStyle="",this.getHolderReportList())},sortMethod2:function(e){e.prop?(this.sortName=e.prop,"ascending"==e.order?this.sortStyle="up":"descending"==e.order?this.sortStyle="low":""==e.order&&(this.sortName="",this.sortStyle),this.getAgencysellList()):(this.sortName="",this.sortStyle="",this.getAgencysellList())},sortMethod3:function(e){e.prop?(this.sortName=e.prop,"ascending"==e.order?this.sortStyle="up":"descending"==e.order?this.sortStyle="low":""==e.order&&(this.sortName="",this.sortStyle),this.getVisitList()):(this.sortName="",this.sortStyle="",this.getVisitList())},tabChnage:function(e,t){var a=e.name;"first"==a&&0==this.holderReportData.length?this.getHolderReportList():"second"==a&&0==this.aggencySellData.length?this.getAgencysellList():"third"==a&&0==this.visitTableData.length&&this.getVisitList()},getHolderReportList:function(){var e=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dBegindate:this.standardTime(this.holderDate1),dEnddate:this.standardTime(this.holderDate2),cFundclass:this.cFundclass,cCrmagencyno:this.sellercode,origin:1,sortStyle:this.sortStyle,sortName:this.sortName,page:this.page,limit:this.limit};l.a.post("/crm/fund/salesFundInfo",t).then(function(t){if("0000"==t.code){e.totalSize=t.data.totalCount,e.holderReportData=t.data.list;var a=window.innerWidth>960?200:250;e.tableHet=window.innerHeight-a,e.fundScaleStaticObj.beginFAssetSum=t.data.beginFAssetSum,e.fundScaleStaticObj.endFAssetSum=t.data.endFAssetSum,e.fundScaleStaticObj.fCurpurchaseSum=t.data.fCurpurchaseSum,e.fundScaleStaticObj.fCurredemptionSum=t.data.fCurredemptionSum,e.fundScaleStaticObj.fNetPurchaseRedemptionSum=t.data.fNetPurchaseRedemptionSum}e.loading.close()}).catch(function(t){e.loading.close()})},getAgencysellList:function(){var e=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dBegindate:this.standardTime(this.agencyDate1),dEnddate:this.standardTime(this.agencyDate2),cCrmagencyno:this.sellercode2,origin:"0",sortStyle:this.sortStyle,sortName:this.sortName,page:this.page2,limit:this.limit2};l.a.post("/crm/fund/salesCenterFundInfo",t).then(function(t){if("0000"==t.code){e.totalSize2=t.data.totalCount,e.aggencySellData=t.data.list;var a=window.innerWidth>960?180:230;e.tableHet2=window.innerHeight-a,e.centerScaleStaticObj.beginFAssetSum=t.data.beginFAssetSum,e.centerScaleStaticObj.endFAssetSum=t.data.endFAssetSum,e.centerScaleStaticObj.fCurpurchaseSum=t.data.fCurpurchaseSum,e.centerScaleStaticObj.fCurredemptionSum=t.data.fCurredemptionSum,e.centerScaleStaticObj.fNetPurchaseRedemptionSum=t.data.fNetPurchaseRedemptionSum}e.loading.close()}).catch(function(t){e.loading.close()})},getVisitList:function(){var e=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dVisitdate:this.visitDate,cCrmagencyno:this.sellercode3,sortStyle:this.sortStyle,sortName:this.sortName,page:this.page3,limit:this.limit3};l.a.post("/crm/custvisit/selectnelCuVi",t).then(function(t){"0000"==t.code&&(e.visitTableData=t.data,e.totalSize3=t.count,e.tableHet3=window.innerHeight-200),e.loading.close()}).catch(function(t){e.loading.close()})},listenIptValChg:function(e){this.getSellerList(e)},listenIptValChg2:function(e){this.getSellerList(e)},getSellerList:function(e){var t=this,a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cAgencyname:e};l.a.post("/crm/acrmagencyInfo/search",a).then(function(e){if("0000"===e.code){var a=e.data.list;t.sellerList=[];var n=!0,i=!1,r=void 0;try{for(var o,l=s()(a);!(n=(o=l.next()).done);n=!0){var c=o.value;t.sellerList.push({key:c.cCrmagencyno,value:c.cAgencyname})}}catch(e){i=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}}}).catch(function(e){})},selectChnage:function(e){this.cAgencyname1=e.value,this.sellercode=e.key,this.getHolderReportList()},selectChnage2:function(e){this.cAgencyname2=e.value,this.sellercode2=e.key,this.getAgencysellList()},listenCustomTypeChange:function(e){this.cFundclass=e.join(","),this.getHolderReportList()},listenUnitChange:function(e){this.currencyUnit=e,this.setLocalStorage("unit",e)},DateChange1:function(e){this.getHolderReportList()},DateChange2:function(e){this.getAgencysellList()},DateChange3:function(e){var t=this.standardTime(e);this.visitDate=t,this.currPage=1,this.getVisitList()},routerBack:function(){this.$router.go("-1")},handleCurrentChange:function(e){this.page=e,this.getHolderReportList()},handleSizeChange:function(e){this.limit=e,this.getHolderReportList()},handleCurrentChange2:function(e){this.page2=e,this.getAgencysellList()},handleSizeChange2:function(e){this.limit2=e,this.getAgencysellList()},handleCurrentChange3:function(e){this.page3=e,this.getVisitList()},handleSizeChange3:function(e){this.limit3=e,this.getVisitList()}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-seller-chg"},[n("div",{staticClass:"main padL10 padR10"},[n("span",{staticClass:"main-back",on:{click:e.routerBack}},[n("img",{staticClass:"back-icon",attrs:{src:a("0YUB"),alt:""}})]),e._v(" "),n("el-tabs",{on:{"tab-click":e.tabChnage},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["first"==e.activeName||"second"==e.activeName?n("currency-unit",{staticStyle:{position:"absolute",right:"0"},attrs:{defaultCurrencyUnit:e.currencyUnit},on:{listenUnitChange:e.listenUnitChange}}):e._e(),e._v(" "),n("el-tab-pane",{attrs:{label:"基金",name:"first"}},[n("div",{staticClass:"header-con"},[n("div",{staticClass:"hidden header"},[n("span",{staticClass:"left ft18 linehet45 blod"},[e._v(e._s(e.cAgencyname1)+"代销数据")]),e._v(" "),n("span",{staticClass:"right rightMedia"},[n("cust-type",{staticClass:"withoutBorder",attrs:{type:"1001"},on:{listenCustomTypeChange:e.listenCustomTypeChange}}),e._v(" "),n("filter-select",{attrs:{placeholder:"请输入销售商名称",round:"",selectOptionData:e.sellerList,itemValue:e.initValue},on:{listenIptValChange:e.listenIptValChg,change:e.selectChnage}}),e._v(" "),n("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"开始日期","picker-options":e.pickerOptions1},on:{change:e.DateChange1},model:{value:e.holderDate1,callback:function(t){e.holderDate1=t},expression:"holderDate1"}}),e._v(" "),n("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"结束日期","picker-options":e.pickerOptions2,disabled:""==e.holderDate1||null==e.holderDate1},on:{change:e.DateChange1},model:{value:e.holderDate2,callback:function(t){e.holderDate2=t},expression:"holderDate2"}})],1)])]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.holderReportData,"max-height":e.tableHet,"summary-method":e.getSummaries,"show-summary":""},on:{"sort-change":e.sortMethod}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{property:"cFundName",label:"基金名称",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"beginFAsset",label:"期初规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.beginFAsset/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"endFAsset",label:"期末规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.endFAsset/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fCurpurchase",label:"总申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.fCurpurchase/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fCurredemption",label:"总赎回",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.fCurredemption/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fNetPurchaseRedemption",label:"净申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.fNetPurchaseRedemption/e.currencyUnit)))])]}}])})],1)],1),e._v(" "),e.holderReportData.length>0?n("div",{staticClass:"pag-con"},[n("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":e.limit,"current-page":e.page,layout:"prev, pager, next, sizes",background:"",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()]),e._v(" "),n("el-tab-pane",{attrs:{label:"销售中心",name:"second"}},[n("div",{staticClass:"header-con"},[n("div",{staticClass:"hidden header"},[n("span",{staticClass:"left ft18 linehet45 blod"},[e._v(e._s(e.cAgencyname2)+"代销数据")]),e._v(" "),n("span",{staticClass:"right rightMedia"},[n("filter-select",{attrs:{placeholder:"请输入销售商名称",round:"",selectOptionData:e.sellerList},on:{listenIptValChange:e.listenIptValChg2,change:e.selectChnage2}}),e._v(" "),n("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"开始日期","picker-options":e.pickerOptions3},on:{change:e.DateChange2},model:{value:e.agencyDate1,callback:function(t){e.agencyDate1=t},expression:"agencyDate1"}}),e._v(" "),n("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"结束日期","picker-options":e.pickerOptions4,disabled:""==e.agencyDate1||null==e.agencyDate1},on:{change:e.DateChange2},model:{value:e.agencyDate2,callback:function(t){e.agencyDate2=t},expression:"agencyDate2"}})],1)])]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.aggencySellData,"max-height":e.tableHet2,"summary-method":e.getSummaries2,"show-summary":""},on:{"sort-change":e.sortMethod2}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{property:"cSalescenter",label:"销售中心",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"cBranch",label:"分行/分公司",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"beginFAsset",label:"期初规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.beginFAsset/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"endFAsset",label:"期末规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.endFAsset/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fCurpurchase",label:"总申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.fCurpurchase/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fCurredemption",label:"总赎回",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.fCurredemption/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fNetPurchaseRedemption",label:"净申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.numFormat(t.row.fNetPurchaseRedemption/e.currencyUnit)))])]}}])})],1)],1),e._v(" "),e.aggencySellData.length>0?n("div",{staticClass:"pag-con"},[n("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":e.limit2,"current-page":e.page2,layout:"prev, pager, next, sizes",background:"",total:e.totalSize2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1):e._e()]),e._v(" "),n("el-tab-pane",{attrs:{label:"拜访记录",name:"third"}},[n("div",{staticClass:"header-con"},[n("div",{staticClass:"hidden header"},[n("span",{staticClass:"left ft18 linehet45 blod"},[e._v("渠道客户拜访记录")]),e._v(" "),n("span",{staticClass:"right"},[n("el-date-picker",{staticClass:"datepicker withoutBorder",attrs:{type:"date",placeholder:"选择日期"},on:{change:e.DateChange3},model:{value:e.visitDate,callback:function(t){e.visitDate=t},expression:"visitDate"}})],1)])]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.visitTableData,"max-height":e.tableHet3,"tooltip-effect":"dark"},on:{"sort-change":e.sortMethod3}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{property:"username",label:"渠道经理",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"cAgencyname",label:"销售商",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"cBranchname",label:"分行/分公司",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"cContactname",label:"联系人",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"cContent",label:"拜访记录","show-overflow-tooltip":"",align:"center",sortable:"custom"}}),e._v(" "),n("el-table-column",{attrs:{property:"dVisitdate",label:"拜访日期",align:"center",sortable:"custom"}})],1)],1),e._v(" "),e.visitTableData.length>0?n("div",{staticClass:"pag-con"},[n("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":e.limit3,"current-page":e.page3,layout:"prev, pager, next, sizes",background:"",total:e.totalSize3},on:{"size-change":e.handleSizeChange3,"current-change":e.handleCurrentChange3}})],1):e._e()])],1)],1)])},staticRenderFns:[]};var m=a("VU/8")(h,g,!1,function(e){a("CWCz")},"data-v-5bbffb46",null);t.default=m.exports}});