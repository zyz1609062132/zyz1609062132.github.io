webpackJsonp([6],{"6Blh":function(t,e){},eLXe:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3pLw"),n=i("y1vT"),s={data:function(){return{iptVal:"",isFocus:!1,isblock:!1,handInput:"",defaultProps:{children:"childDirs",label:"cDirectory"},timer:null,selectOption:null}},props:{optionData:{type:Array,default:[]},placeholder:{type:String,default:""},initVal:{type:String,default:""},round:{type:String,default:""}},watch:{initVal:function(t){this.iptVal=t}},mounted:function(){document.addEventListener("touchend",this.listenSelTouch,!1);document.getElementById("selectTreeIpt")},beforeDestroy:function(){document.removeEventListener("touchend",this.listenSelTouch,!1),clearTimeout(this.timer)},methods:{iptValueChange:i.n(n)()(function(t){var e=t.target.value.trim();""!=e&&(this.handInput=e,new RegExp('[\\\\/:*?"<>|]').test(e)||this.$emit("listenIptValChange",e))},50),isShowIpt:function(){this.isFocus=!0,this.isblock=!0},iptBlur:function(){this.isFocus=!1},listenSelTouch:function(t){var e=this;this.timer=setTimeout(function(){var i=t.target.className,a=t.target.nodeName;"c-option-item"!==i&&"LI"!==a&&-1==i.indexOf("c-select-input")&&"INPUT"!==a&&-1==i.indexOf("el-tree-node")&&(e.isblock=!1)},50)},listenKeydown:function(t){t.keyCode},submitTreeItem:function(){this.$emit("change",this.selectOption),this.iptVal=this.selectOption.cDirectory},handleNodeClick:function(t){this.selectOption=t}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-common-select"},[i("div",{staticClass:"input-con"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.iptVal,expression:"iptVal"}],staticClass:"c-select-input",class:{"ipt-focus":t.isFocus,round:""==t.round},attrs:{id:"selectTreeIpt",type:"text",placeholder:t.placeholder},domProps:{value:t.iptVal},on:{focus:t.isShowIpt,blur:t.iptBlur,input:[function(e){e.target.composing||(t.iptVal=e.target.value)},t.iptValueChange]}})]),t._v(" "),i("div",{staticClass:"c-option-con",style:{display:t.isblock?"block":"none"}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:t.optionData.length>0,expression:"optionData.length > 0"}],staticClass:"item-con"},[i("div",{staticClass:"maxHet"},[i("el-tree",{attrs:{data:t.optionData,props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),i("li",{staticClass:"treeSubmit"},[i("el-button",{staticClass:"right",attrs:{id:"treeMakesure",type:"primary",size:"mini",round:""},on:{click:t.submitTreeItem}},[t._v("确定")])],1)]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:0==t.optionData.length,expression:"optionData.length == 0"}],staticClass:"item-con"},[i("li",{staticClass:"c-option-item nodata"},[t._v("无数据")])])])])},staticRenderFns:[]};var r={data:function(){return{navigateList:[{dirName:"/ ",cDirectoryid:""}],currDirectoryId:"",tableHet:500,fileList:[],loading:null,currPage:1,pageSize:50,totalSize:1}},components:{selectTree:i("VU/8")(s,o,!1,function(t){i("yKaj")},"data-v-48b64298",null).exports,filterSelect:i("8BiH").a},mounted:function(){this.getDirectoryList()},methods:{clickNav:function(t,e){this.currDirectoryId=t.cDirectoryid,this.navigateList=this.navigateList.slice(0,e+1),this.getDirectoryList()},goNextPage:function(t){"0"==t.row.type&&(this.navigateList.push({dirName:t.row.cDirectory,cDirectoryid:t.row.cDirectoryid}),this.currDirectoryId=t.row.cDirectoryid,this.getDirectoryList())},handleCurrentChange:function(t){this.currPage=t,this.getDirectoryList()},handleSizeChange:function(t){this.pageSize=t,this.currPage=1,this.getDirectoryList()},getDirectoryList:function(){var t=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),page:this.currPage,limit:this.pageSize,cDirectoryid:this.currDirectoryId,cAuditflag:1};a.a.post("/crm/materials/selectFileDirByDirid",e).then(function(e){console.log(e),"0000"===e.code&&(t.fileList=e.data,t.totalSize=e.count,t.tableHet=window.innerHeight-150),t.loading.close()}).catch(function(e){t.loading.close()})},checkItem:function(t){var e=this,i=t.row,n=i.cDirectoryid,s=i.cFilekey,o=i.cDirectory,r={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cDirectoryid:n,cFilekey:s,cFilename:o};a.a.post("/crm/materials/fileDownload",r).then(function(t){if("200"===t.code){var i={type:11,url:t.data};e.postMsgToClient(i)}}).catch(function(t){})}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"backWhite pad10 v-documents"},[i("el-tabs",[i("el-tab-pane",{attrs:{label:"宣传材料"}},[i("div",{staticClass:"marBtm10"},[i("div",{staticClass:"breadcrumb-con"},[i("el-breadcrumb",{staticClass:"container",attrs:{"separator-class":"el-icon-arrow-right"}},[t._v("\n            目录： \n            "),t._l(t.navigateList,function(e,a){return i("el-breadcrumb-item",{key:a,nativeOn:{click:function(i){t.clickNav(e,a)}}},[t._v(t._s(e.dirName))])})],2)],1)]),t._v(" "),i("section",[i("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.fileList,"max-height":t.tableHet}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{property:"cDirectory",label:"目录名称",align:"left",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"ionc-con",on:{click:function(i){t.goNextPage(e)}}},[0==e.row.type?i("i",{staticClass:"dirIcon"}):t._e(),t._v(" "),1==e.row.type?i("i",{staticClass:"fileIcon"}):t._e(),t._v("  "+t._s(e.row.cDirectory)+"\n              ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{property:"cCreateuser",label:"创建人",align:"right"}}),t._v(" "),i("el-table-column",{attrs:{property:"dCreatedate",label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.dCreatedate))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return 1==e.row.type?[i("el-button",{staticClass:"operate font14",attrs:{type:"text",size:"small"},on:{click:function(i){t.checkItem(e)}}},[t._v("下载资料")])]:void 0}}])})],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.fileList.length>0,expression:"fileList.length > 0"}],staticClass:"pag-con"},[i("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":t.pageSize,"current-page":t.currPage,layout:"prev, pager, next, sizes",background:"",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)},staticRenderFns:[]};var l=i("VU/8")(r,c,!1,function(t){i("6Blh")},"data-v-2ff0ca20",null);e.default=l.exports},yKaj:function(t,e){}});