webpackJsonp([30],{SoR1:function(t,e){},fqj4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),n=a.n(s),r=a("3pLw"),l=a("KBWm"),o=a("z/fv"),i=(a("y1vT"),a("8BiH")),c=[{cSaleCenter:"北京",centerNo:"1"},{cSaleCenter:"上海",centerNo:"2"},{cSaleCenter:"深圳",centerNo:"3"},{cSaleCenter:"其他",centerNo:"9999"}],u={data:function(){return{activeName:"0",date:"",cFundcode:"",cFundcodeList:[],currencyUnit:"10000",SellerTableData:[],centererTableData:[],mgrTableData:[],bankSaleData:[],cCustmgrList:[],loding1:!1,loding2:!1,loding3:!1,loding4:!1,productsList:[],arr:[],isShow:!0,sortName:"",sortStyle:""}},components:{currencyUnit:l.a,custType:o.a,filterSelect:i.a},created:function(){this.getFundList(),this.getLocalStorage("unit")?this.currencyUnit=this.getLocalStorage("unit"):this.currencyUnit="10000"},methods:{sortMethod:function(t){this.cFundcode?this.date?t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.getTotalscale()):(this.sortName="",this.sortStyle="",this.getTotalscale()):this.$message({message:"请选择需要查询的日期!",type:"warning"}):this.$message({message:"请选择产品!",type:"warning"})},sortMethod2:function(t){this.cFundcode?this.date?t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.getCenterscale()):(this.sortName="",this.sortStyle="",this.getCenterscale()):this.$message({message:"请选择需要查询的日期!",type:"warning"}):this.$message({message:"请选择产品!",type:"warning"})},sortMethod3:function(t){this.cFundcode?this.date?t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.getMgrscale()):(this.sortName="",this.sortStyle="",this.getMgrscale()):this.$message({message:"请选择需要查询的日期!",type:"warning"}):this.$message({message:"请选择产品!",type:"warning"})},sortMethod4:function(t){this.cFundcode?this.date?t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.getAgencyscale()):(this.sortName="",this.sortStyle="",this.getAgencyscale()):this.$message({message:"请选择需要查询的日期!",type:"warning"}):this.$message({message:"请选择产品!",type:"warning"})},clearSelect:function(){this.date="",this.arr=[],this.cFundcode=""},checkAll:function(){var t=this;this.cFundcode?this.date?(this.getTotalscale(),this.getCenterscale(),this.getMgrscale(),this.getAgencyscale()):this.$message({message:"请选择需要查询的日期!",type:"warning"}):(this.$message({message:"请选择产品!",type:"warning"}),setTimeout(function(){t.SellerTableData=[],t.centererTableData=[],t.mgrTableData=[],t.bankSaleData=[]},1500))},getFundList:function(){var t=this,e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username")};r.a.post("/crm/channelDaily/holdFundname",e).then(function(e){"0000"===e.code&&(t.productsList=e.data.cFundnamelist)}).catch(function(t){})},checkThisShowMore:function(){document.getElementById("main").style.height="100%",this.isShow=!1},checkThisShowLess:function(){document.getElementById("main").style.height="3.5rem",this.isShow=!0},checkedBox:function(t){this.arr.includes(t)?(this.arr=this.arr.filter(function(e){return e!=t}),this.cFundcode=this.arr.join()):(this.arr.push(t),this.cFundcode=this.arr.join())},listenUnitChange:function(t){this.currencyUnit=t,this.setLocalStorage("unit",t)},scaleDateChange:function(t){this.date=this.standardTime(t)},getTotalscale:function(){var t=this;this.loding1=!0,this.SellerTableData=[];var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),sortStyle:this.sortStyle,sortName:this.sortName,cFundName:this.cFundcode,dCDate:this.date};r.a.post("/crm/channelDaily/selectTatolSales",e).then(function(e){"0000"===e.code&&(t.SellerTableData=e.data.list),t.loding1=!1}).catch(function(e){t.loding1=!1})},getCenterscale:function(){var t=this;this.loding2=!0,this.centererTableData=[];var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),sortStyle:this.sortStyle,sortName:this.sortName,cFundName:this.cFundcode,dCDate:this.date};r.a.post("/crm/channelDaily/selectEveryCenterSale",e).then(function(e){if("0000"===e.code){var a=e.data.list,s={cSaleCenter:"合计",fTask:0,fRatio:"100%",fTotalPurchase:0,fTotalRedemption:0,fAsset:0,fCompletRatio:0,index:"-"},r=!0,l=!1,o=void 0;try{for(var i,c=n()(a);!(r=(i=c.next()).done);r=!0){var u=i.value;s.fTask+=Number(u.fTask),s.fTotalPurchase+=Number(u.fTotalPurchase),s.fTotalRedemption+=Number(u.fTotalRedemption),s.fAsset+=Number(u.fAsset),s.fCompletRatio=0==s.fTask?0:Number(s.fAsset/s.fTask*100).toFixed(2)}}catch(t){l=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(l)throw o}}for(var d in a)a[d].fRatio=0==a[d].fTask?0:Number(a[d].fTask/s.fTask).toFixed(2),a[d].index=Number(d)+1,t.centererTableData.push(a[d]);t.centererTableData.length>1&&t.centererTableData.push(s)}t.loding2=!1}).catch(function(e){t.loding2=!1})},getMgrscale:function(){var t=this;this.loding3=!0,this.mgrTableData=[];var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),sortStyle:this.sortStyle,sortName:this.sortName,cFundName:this.cFundcode,dCDate:this.date};r.a.post("/crm/channelDaily/selectEveryManSale",e).then(function(e){if("0000"===e.code){var a=e.data.list,s={cChannelMgrUm:"合计",fTask:0,fRatio:0,fTotalPurchase:0,fTotalRedemption:0,fAsset:0,fCompletRatio:0,index:"-"},r=!0,l=!1,o=void 0;try{for(var i,c=n()(a);!(r=(i=c.next()).done);r=!0){var u=i.value;s.fTask+=Number(u.fTask),s.fTotalPurchase+=Number(u.fTotalPurchase),s.fTotalRedemption+=Number(u.fTotalRedemption),s.fAsset+=Number(u.fAsset),s.fCompletRatio=0==s.fAsset||0==s.fTask?0:Number(s.fAsset/s.fTask*100).toFixed(2),s.fRatio=0==s.fTask?0:"100%"}}catch(t){l=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(l)throw o}}for(var d in a)a[d].fRatio=0==a[d].fTask||s.fTask?0:Number(a[d].fTask/s.fTask).toFixed(2),a[d].index=Number(d)+1,t.mgrTableData.push(a[d]);t.mgrTableData.length>1&&t.mgrTableData.push(s)}t.loding3=!1}).catch(function(e){t.loding3=!1})},getAgencyscale:function(){var t=this;this.loding4=!0,this.bankSaleData=[];var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),sortStyle:this.sortStyle,sortName:this.sortName,cFundName:this.cFundcode,dCDate:this.date};r.a.post("/crm/channelDaily/selectEveryBankSale",e).then(function(e){if("0000"===e.code){var a=e.data.list,s=e.data.agency,r=!0,l=!1,o=void 0;try{for(var i,u=n()(s);!(r=(i=u.next()).done);r=!0){var d=i.value;for(var h in c)t.bankSaleData.push({cAgencyName:d.cAgencyName,cAgencyNo:d.cAgencyNo,cSaleCenter:c[h].cSaleCenter,centerNo:c[h].cSaleCenter,tableData:[],bankIndex:h})}}catch(t){l=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(l)throw o}}t.setBankList(a)}}).catch(function(e){t.loding4=!1})},setBankList:function(t){var e=this.bankSaleData,a=!0,s=!1,r=void 0;try{for(var l,o=n()(e);!(a=(l=o.next()).done);a=!0){var i=l.value,c=0,u={cSaleCenter:i.cSaleCenter,cBranch:" 合计",fCurPurchase:0,fCurRedemption:0,fTotalPurchase:0,fTotalRedemption:0,fAsset:0},d=!0,h=!1,m=void 0;try{for(var f,g=n()(t);!(d=(f=g.next()).done);d=!0){var p=f.value;c++,p.cAgencyName==i.cAgencyName&&p.cSaleCenter==i.cSaleCenter&&(u.fCurPurchase+=p.fCurPurchase,u.fCurRedemption+=p.fCurRedemption,u.fTotalPurchase+=p.fTotalPurchase,u.fTotalRedemption+=p.fTotalRedemption,u.fAsset+=p.fAsset,i.tableData.push(p)),c>=t.length&&i.tableData.push(u)}}catch(t){h=!0,m=t}finally{try{!d&&g.return&&g.return()}finally{if(h)throw m}}}}catch(t){s=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw r}}this.loding4=!1},getcCustmgrList:function(t){var e=this,a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),username:t};r.a.post("/crm/sysuser/search",a).then(function(t){"0000"===t.code&&(e.cCustmgrList=t.data.list)}).catch(function(t){})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"backWhite pad10 v-channel-daily"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"持营及首发产品日报",name:"0"}},[a("div",{staticClass:"marBtm10"},[a("div",{staticClass:"hidden con"},[a("span",{staticClass:"left ft18 linehet45 blod"},[t._v("产品筛选")]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"more"},[a("el-button",{attrs:{type:"primary"},on:{click:t.checkAll}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:t.clearSelect}},[a("i",{staticClass:"el-icon-delete"})]),t._v(" "),1==t.isShow?a("el-button",{on:{click:t.checkThisShowMore}},[t._v("更多")]):a("el-button",{on:{click:t.checkThisShowLess}},[t._v("收起")])],1)])]),t._v(" "),a("div",{staticClass:"hidden"},[a("ul",{staticClass:"box",attrs:{id:"main"}},t._l(t.productsList,function(e,s){return a("li",{class:{checked:t.arr.includes(e.cFundCode)},on:{click:function(a){t.checkedBox(e.cFundCode)}}},[t._v(t._s(e.cFundName))])}))]),t._v(" "),a("div",{staticClass:"hidden con"},[a("span",{staticClass:"left ft18 linehet45 blod"},[t._v("总销量")]),t._v(" "),a("span",{staticClass:"right"},[a("el-date-picker",{staticClass:"datepicker wid176 withoutBorder",attrs:{type:"date",placeholder:"选择日期"},on:{change:t.scaleDateChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),a("currency-unit",{attrs:{defaultCurrencyUnit:t.currencyUnit},on:{listenUnitChange:t.listenUnitChange}})],1)]),t._v(" "),a("div",{staticClass:"hidden"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loding1,expression:"loding1"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:t.SellerTableData,"max-height":"400"},on:{"sort-change":t.sortMethod}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"cAgencyName",label:"代销机构",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"fCurPurchase",label:"当日申购",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fCurPurchase/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fCurRedemption",label:"当日赎回",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fCurRedemption/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalPurchase",label:"累计申购",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalPurchase/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalRedemption",label:"累计赎回",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalRedemption/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fAsset",label:"预估保有量",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fAsset/t.currencyUnit)))])]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"marBtm10"},[a("div",{staticClass:"hidden con"},[a("span",{staticClass:"left ft18 linehet45 blod"},[t._v("各中心销量")]),t._v(" "),a("span",{staticClass:"right"})]),t._v(" "),a("div",{staticClass:"hidden"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loding2,expression:"loding2"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:t.centererTableData,"max-height":"400"},on:{"sort-change":t.sortMethod2}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"cSaleCenter",label:"销售中心",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"fTask",label:"目标任务",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTask/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fRatio",label:"占比（%）",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalPurchase",label:"累计申购",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalPurchase/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalRedemption",label:"累计赎回",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalRedemption/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fAsset",label:"预估保有量",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fAsset/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fCompletRatio",label:"目标完成率（%）",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"index",label:"排名",align:"center",sortable:"custom"}})],1)],1)]),t._v(" "),a("div",{staticClass:"marBtm10"},[a("div",{staticClass:"hidden con"},[a("span",{staticClass:"left ft18 linehet45 blod"},[t._v("各人员销量")]),t._v(" "),a("span",{staticClass:"right"})]),t._v(" "),a("div",{staticClass:"hidden"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loding3,expression:"loding3"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:t.mgrTableData,"max-height":"400"},on:{"sort-change":t.sortMethod3}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"cChannelMgrUm",label:"负责人",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"fRatio",label:"任务占比",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"fTask",label:"目标任务",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTask/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalPurchase",label:"累计申购",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalPurchase/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalRedemption",label:"累计赎回",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalRedemption/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fAsset",label:"预估保有量",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fAsset/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fCompletRatio",label:"目标完成率（%）",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"index",label:"排名",align:"center",sortable:"custom"}})],1)],1)]),t._v(" "),t._l(t.bankSaleData,function(e,s){return a("div",{key:s},[e.tableData.length>1?a("div",{staticClass:"marBtm10"},[a("div",{staticClass:"hidden con"},[a("span",{staticClass:"left ft18 linehet45 blod"},[t._v(t._s(e.cAgencyName)+"明细销售")]),t._v(" "),a("span",{staticClass:"right"})]),t._v(" "),a("div",{staticClass:"hidden"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loding4,expression:"loding4"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData,"max-height":"400"},on:{"sort-change":t.sortMethod4}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"cSaleCenter",label:"销售中心",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"cBranch",label:e.cAgencyName,align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"fCurPurchase",label:"当日申购金额",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fCurPurchase/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fCurRedemption",label:"当日赎回金额",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fCurRedemption/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalPurchase",label:"累计申购金额",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalPurchase/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalRedemption",label:"累计赎回金额",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fTotalRedemption/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fAsset",label:"预估保有量",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.numFormat(e.row.fAsset/t.currencyUnit)))])]}}])})],1)],1)]):t._e()])})],2)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(u,d,!1,function(t){a("SoR1")},"data-v-1a5c4dd9",null);e.default=h.exports}});