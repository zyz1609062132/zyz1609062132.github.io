webpackJsonp([31],{"9xBN":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("3pLw"),o={data:function(){return{cCustname:this.$route.query.cCustname,cCustno:this.$route.query.cCustno,disabled:!0,visitRecordForm:{username:"",cCustname:"",cContactname:"",cContactmgr:"",cCustno:"",cVisitid:"",cVisittime:"",cSummary:"",cContactno:"",cContent:""}}},components:{},mounted:function(){this.getDataToForm()},methods:{changeCVisittime:function(t){this.visitRecordForm.cVisittime=this.standardTime(t)},routerBack:function(){this.$router.go("-1")},getDataToForm:function(){this.visitRecordForm.username=this.$route.query.username,this.visitRecordForm.cCustname=this.$route.query.cCustname,this.visitRecordForm.cContactname=this.$route.query.cContactname,this.visitRecordForm.cContactmgr=this.$route.query.cContactmgr,this.visitRecordForm.cCustno=this.$route.query.cCustno,this.visitRecordForm.cVisitid=this.$route.query.cVisitid,this.visitRecordForm.cVisittime=this.$route.query.cVisittime,this.visitRecordForm.cSummary=this.$route.query.cSummary,this.visitRecordForm.cContactno=this.$route.query.cContactno,this.visitRecordForm.cContent=this.$route.query.cContent},onSubmit:function(){var t=this;if(this.visitRecordForm.cSummary&&this.visitRecordForm.cContent){var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cContactmgr:this.visitRecordForm.cContactmgr,cCustno:this.visitRecordForm.cCustno,cVisitid:this.visitRecordForm.cVisitid,cContactno:this.visitRecordForm.cContactno,cVisittime:this.visitRecordForm.cVisittime,cSummary:this.visitRecordForm.cSummary,cContent:this.visitRecordForm.cContent};s.a.post("/crm/custvisit/updateCuVi",e).then(function(e){"0000"===e.code&&(t.$message({message:"修改成功",type:"info"}),t.routerBack())}).catch(function(e){t.$message({message:"修改失败",type:"error"})})}else this.$message({message:"标记红色星号为必填项",type:"warning"})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"createAddressBookAndVisitRecord-wrap pad10"},[s("div",{staticClass:"createAddressBookAndVisitRecord-main"},[s("span",{staticClass:"createAddressBookAndVisitRecord-main-back",on:{click:t.routerBack}},[s("img",{staticClass:"back-icon",attrs:{src:i("0YUB"),alt:""}}),t._v(" "),s("i",{staticStyle:{"padding-left":"5px",color:"#cf9f68"}},[t._v("返回")])]),t._v(" "),s("span",{staticClass:"createAddressBookAndVisitRecord-main-title"},[t._v("修改拜访记录")])]),t._v(" "),s("div",{staticClass:"createAddressBookAndVisitRecord-main-header pad10"},[s("div",{staticClass:"createAddressBookAndVisitRecord-main-body"},[s("el-form",{ref:"form",attrs:{model:t.visitRecordForm}},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"销售经理",required:""}},[s("el-input",{staticClass:"modify-input",attrs:{disabled:t.disabled},model:{value:t.visitRecordForm.username,callback:function(e){t.$set(t.visitRecordForm,"username",e)},expression:"visitRecordForm.username"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构名称"}},[s("el-input",{staticClass:"modify-input",attrs:{disabled:t.disabled},model:{value:t.visitRecordForm.cCustname,callback:function(e){t.$set(t.visitRecordForm,"cCustname",e)},expression:"visitRecordForm.cCustname"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人"}},[s("el-input",{staticClass:"modify-input",attrs:{disabled:t.disabled},model:{value:t.visitRecordForm.cContactname,callback:function(e){t.$set(t.visitRecordForm,"cContactname",e)},expression:"visitRecordForm.cContactname"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"拜访日期"}},[s("el-date-picker",{staticClass:"modify-input",attrs:{type:"date",placeholder:"选择日期"},on:{change:t.changeCVisittime},model:{value:t.visitRecordForm.cVisittime,callback:function(e){t.$set(t.visitRecordForm,"cVisittime",e)},expression:"visitRecordForm.cVisittime"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"拜访摘要",required:""}},[s("el-input",{staticClass:"modify-input",attrs:{maxlength:"16"},model:{value:t.visitRecordForm.cSummary,callback:function(e){t.$set(t.visitRecordForm,"cSummary",e)},expression:"visitRecordForm.cSummary"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"拜访记录",required:""}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.visitRecordForm.cContent,expression:"visitRecordForm.cContent"}],staticClass:"modify-input tempTextarea",staticStyle:{"-webkit-user-select":"auto"},attrs:{type:"text",maxlength:"500"},domProps:{value:t.visitRecordForm.cContent},on:{input:function(e){e.target.composing||t.$set(t.visitRecordForm,"cContent",e.target.value)}}})])],1)],1),t._v(" "),s("div",{staticClass:"btn-box"},[s("el-button",{on:{click:t.routerBack}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit(2)}}},[t._v("确定")])],1)],1)],1)])])},staticRenderFns:[]};var c=i("VU/8")(o,r,!1,function(t){i("ZRT/")},"data-v-161ec0dd",null);e.default=c.exports},"ZRT/":function(t,e){}});