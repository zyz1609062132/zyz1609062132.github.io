webpackJsonp([32],{CEwb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("BO1k"),s=n.n(a),c=n("3pLw"),i=n("KBWm"),r=n("z/fv"),l=n("8BiH"),o={1:"北京",2:"上海",3:"深圳",9999:"其他"},u={data:function(){var e=this;return{cSalescentername2:"",activeName:"first",agencyDate1:"",agencyDate2:"",pickerOptions1:{disabledDate:function(t){return e.agencyDate1?t.getTime()>Date.now()||t.getTime()>e.agencyDate2:t.getTime()>Date.now()}},pickerOptions2:{disabledDate:function(t){return t.getTime()<e.agencyDate1||t.getTime()>Date.now()}},sortName:"",sortStyle:"",currencyUnit2:"100000000",cFundclass:"",cSalescenter2:"",aggencySellData:[],loading:null,tableHet:500,cCrmagencyno:"",cAgencyNameList:[],page2:1,limit2:50,totalSize2:1,tableHet2:500,cAgencyno:"",cAgencyclass:"",sellerList:[],checkedSellers:[],prevCheckedSellerId:[],dialogVisible:!1,sellerScaleStaticObj:{}}},components:{currencyUnit:i.a,custType:r.a,filterSelect:l.a},mounted:function(){var e=this.$route.query.centerId.toString(),t=this.$route.query.startDate,n=this.$route.query.endDate;this.cAgencyclass=this.$route.query.cAgencyclass,this.cCrmagencyno=this.$route.query.cCrmagencyno,this.agencyDate1=t,this.agencyDate2=n,e&&(this.cSalescentername2=o[e],this.cSalescenter2=e,this.getCAgencyNameList(),this.getAgencysellList())},created:function(){this.getLocalStorage("unit")?this.currencyUnit2=this.getLocalStorage("unit"):this.currencyUnit2="100000000"},methods:{getSummaries:function(e){var t=this,n=e.columns,a=(e.data,[]);return n.forEach(function(e,n){0!==n?1!=n?2==n?a[n]=t.numFormat(t.sellerScaleStaticObj.beginFAssetSum/t.currencyUnit2):3==n?a[n]=t.numFormat(t.sellerScaleStaticObj.endFAssetSum/t.currencyUnit2):4==n?a[n]=t.numFormat(t.sellerScaleStaticObj.fCurpurchaseSum/t.currencyUnit2):5==n?a[n]=t.numFormat(t.sellerScaleStaticObj.fCurredemptionSum/t.currencyUnit2):6==n&&(a[n]=t.numFormat(t.sellerScaleStaticObj.fNetPurchaseRedemptionSum/t.currencyUnit2)):a[n]="":a[n]="合计"}),a},sortMethod:function(e){e.prop?(this.sortName=e.prop,"ascending"==e.order?this.sortStyle="up":"descending"==e.order?this.sortStyle="low":""==e.order&&(this.sortName="",this.sortStyle),this.getAgencysellList()):(this.sortName="",this.sortStyle="",this.getAgencysellList())},listencCrmagencynoChange:function(){this.getAgencysellList()},getCAgencyNameList:function(){var e=this,t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cSalescenter:this.cSalescenter2,cAgencyclass:this.cAgencyclass,page:1,limit:1e3};c.a.post("/crm/fund/salesManFundInfo",t).then(function(t){"0000"==t.code&&(e.cAgencyNameList=t.data.list)}).catch(function(e){})},getAgencysellList:function(){var e=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dBegindate:this.standardTime(this.agencyDate1),dEnddate:this.standardTime(this.agencyDate2),cSalescenter:this.cSalescenter2,cCrmagencyno:this.cCrmagencyno,cAgencyclass:this.cAgencyclass,sortStyle:this.sortStyle,sortName:this.sortName,page:this.page2,limit:this.limit2};c.a.post("/crm/fund/cBranchFundInfo",t).then(function(t){if("0000"==t.code){e.totalSize2=t.data.totalCount,e.aggencySellData=t.data.list;var n=window.innerWidth>960?200:250;e.tableHet2=window.innerHeight-n,e.sellerScaleStaticObj.beginFAssetSum=t.data.beginFAssetSum,e.sellerScaleStaticObj.endFAssetSum=t.data.endFAssetSum,e.sellerScaleStaticObj.fCurpurchaseSum=t.data.fCurpurchaseSum,e.sellerScaleStaticObj.fCurredemptionSum=t.data.fCurredemptionSum,e.sellerScaleStaticObj.fNetPurchaseRedemptionSum=t.data.fNetPurchaseRedemptionSum}e.loading.close()}).catch(function(t){e.loading.close()})},listenCustomTypeChange3:function(e){this.cSalescentername2=o[e],this.cSalescenter2=e,this.getAgencysellList()},listenIptValChg:function(e){e&&this.getSellerList(e)},getSellerList:function(e){var t=this;if(e){var n={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),agencyKey:e};c.a.post("/crm/nelcontact/searchAgency",n).then(function(e){if("0000"===e.code){t.sellerList=[];var n=e.data.list,a=!0,c=!1,i=void 0;try{for(var r,l=s()(n);!(a=(r=l.next()).done);a=!0){var o=r.value;t.sellerList.push({key:o.cAgencyno,value:o.cAgencyname})}}catch(e){c=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(c)throw i}}}}).catch(function(e){})}},selectChnage:function(e){-1==this.prevCheckedSellerId.indexOf(e.key)&&(this.checkedSellers.push(e),this.prevCheckedSellerId.push(e.key))},listenUnitChange2:function(e){this.currencyUnit2=e,this.setLocalStorage("unit",e)},DateChange2:function(e){this.getAgencysellList()},handleCurrentChange2:function(e){this.page2=e,this.getAgencysellList()},handleSizeChange2:function(e){this.limit2=e,this.getAgencysellList()},routerBack:function(){this.$router.go("-1")},handleClose:function(e){e()},removeCheckedSeller:function(e){this.prevCheckedSellerId.splice(e,1),this.checkedSellers.splice(e,1)},resetCheckFund:function(){this.checkedSellers=[],this.prevCheckedSellerId=[],this.$refs.filterSelect.iptVal=""},dialogEnsure:function(){this.cAgencyno=this.prevCheckedSellerId.join(),this.dialogVisible=!1,this.getAgencysellList()}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v-center-chg"},[a("div",{staticClass:"main padL10 padR10"},[a("span",{staticClass:"main-back",on:{click:e.routerBack}},[a("img",{staticClass:"back-icon",attrs:{src:n("0YUB"),alt:""}})]),e._v(" "),a("div",{staticClass:"header-con"},[a("div",{staticClass:"hidden header"},[a("span",{staticClass:"left ft18 linehet45 blod"},[e._v(e._s(e.cSalescentername2)+"销售中心分行代销数据")]),e._v(" "),a("span",{staticClass:"right rightMedia"},[a("el-select",{staticClass:"withoutBorder",attrs:{placeholder:"销售商"},on:{change:e.listencCrmagencynoChange},model:{value:e.cCrmagencyno,callback:function(t){e.cCrmagencyno=t},expression:"cCrmagencyno"}},e._l(e.cAgencyNameList,function(e){return a("el-option",{key:e.cCrmagencyno,attrs:{label:e.cAgencyName,value:e.cCrmagencyno}})})),e._v(" "),a("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"开始日期","picker-options":e.pickerOptions1},on:{change:e.DateChange2},model:{value:e.agencyDate1,callback:function(t){e.agencyDate1=t},expression:"agencyDate1"}}),e._v(" "),a("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"结束日期","picker-options":e.pickerOptions2,disabled:""==e.agencyDate1||null==e.agencyDate1},on:{change:e.DateChange2},model:{value:e.agencyDate2,callback:function(t){e.agencyDate2=t},expression:"agencyDate2"}}),e._v(" "),a("currency-unit",{attrs:{defaultCurrencyUnit:e.currencyUnit2},on:{listenUnitChange:e.listenUnitChange2}})],1)])]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.aggencySellData,"max-height":e.tableHet2,"summary-method":e.getSummaries,"show-summary":""},on:{"sort-change":e.sortMethod}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"cBranch",label:"分行/分公司",align:"center",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{property:"beginFAsset",label:"期初规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.numFormat(t.row.beginFAsset/e.currencyUnit2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"endFAsset",label:"期末规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.numFormat(t.row.endFAsset/e.currencyUnit2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"fCurpurchase",label:"总申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.numFormat(t.row.fCurpurchase/e.currencyUnit2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"fCurredemption",label:"总赎回",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.numFormat(t.row.fCurredemption/e.currencyUnit2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"fNetPurchaseRedemption",label:"净申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.numFormat(t.row.fNetPurchaseRedemption/e.currencyUnit2)))])]}}])})],1)],1),e._v(" "),e.aggencySellData.length>0?a("div",{staticClass:"pag-con"},[a("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":e.limit2,"current-page":e.page2,layout:"prev, pager, next, sizes",background:"",total:e.totalSize2},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1):e._e(),e._v(" "),a("el-dialog",{staticClass:"dialog-con",attrs:{title:"请选择销售商",visible:e.dialogVisible,width:"45%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("filter-select",{ref:"filterSelect",staticClass:"wid300",attrs:{round:"",placeholder:"请输入销售商名称",selectOptionData:e.sellerList},on:{listenIptValChange:e.listenIptValChg,change:e.selectChnage}}),e._v(" "),a("ul",{staticClass:"checkfunds"},[a("span",{staticClass:"title"},[e._v("已选销售商：")]),e._v(" "),e._l(e.checkedSellers,function(t,n){return a("li",{key:n,staticClass:"fund",on:{click:function(t){e.removeCheckedSeller(n)}}},[e._v("\n            "+e._s(t.value)+"\n            "),a("i",{staticClass:"fund-remove"})])})],2)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetCheckFund}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogEnsure}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var h=n("VU/8")(u,g,!1,function(e){n("Z72p")},"data-v-0fd28ea2",null);t.default=h.exports},Z72p:function(e,t){}});