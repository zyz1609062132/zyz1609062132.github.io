webpackJsonp([10],{"1qCs":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),n=a.n(s),i=a("3pLw"),c={data:function(){return{activeName:"0",custName:"",custDept:"",tableHet:500,currPage:1,pageSize:50,totalSize:1,optionsList:[],protectList:[]}},components:{filterSelect:a("8BiH").a},methods:{custChange:function(t){(!t||t.length<4)&&(this.custDept="",this.$refs.channelMgrCon&&(this.$refs.channelMgrCon.iptVal=""))},listenIptValChg:function(t){this.custDept="",t&&this.getDeptList(t)},getDeptList:function(t){var e=this;if(t){var a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cCustname:this.custName,cCustdpt:t};i.a.post("/crm/protectcust/selectCustdpt",a).then(function(t){if("0000"===t.code){e.optionsList=[];var a=t.data.list,s=0,i=!0,c=!1,r=void 0;try{for(var l,o=n()(a);!(i=(l=o.next()).done);i=!0){var u=l.value;e.optionsList.push({key:s++,value:u.cCustdpt})}}catch(t){c=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(c)throw r}}}}).catch(function(t){})}else this.optionsList=[]},getCheck:function(){var t=this;if(this.protectList=[],this.custName){if(/[^\u4e00-\u9fa5,]/.test(this.custName))this.$message({message:"请输入中文名称",type:"warning"});else if(this.custName.length<4)this.$message({message:"客户名称最少为4个字",type:"warning"});else if(this.custDept){var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cCustname:this.custName,cCustdpt:this.custDept,page:this.currPage,limit:this.pageSize};i.a.post("/crm/protectcust/selectProtectCust",e).then(function(e){"0000"===e.code?(t.tableHet=window.innerHeight-45-140-20-32,t.protectList=e.data,e.data&&e.data.length>0?t.$alert("与该查询条件相匹配的受保护客户信息如列表展示"):t.$alert("该查询条件未在受保护清单查到信息")):t.$message.error({message:"系统错误"})}).catch(function(t){})}else this.$message({message:"请选择客户部门",type:"warning"})}else this.$message({message:"请输入客户名称",type:"warning"})},handleSizeChange:function(t){this.pageSize=t,this.getCheck()},handleCurrentChange:function(t){this.currPage=t,this.getCheck()},selectChnage:function(t){this.custDept=t.value}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"backWhite pad10 v-protectcust"},[a("el-tabs",[a("el-tab-pane",{attrs:{label:"保护客户查询"}},[a("div",{staticClass:"marBtm10"},[a("el-form",[a("el-row",{staticStyle:{margin:"0"},attrs:{gutter:22}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{staticClass:"protectcust-ipt",attrs:{change:t.custChange(t.custName),placeholder:"请输入客户完整名称"},model:{value:t.custName,callback:function(e){t.custName=e},expression:"custName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户部门"}},[a("filter-select",{ref:"channelMgrCon",staticClass:"wid100pc repairborder custDepartment",attrs:{placeholder:"请查询客户部门",round:"",disabled:!t.custName||t.custName.length<4,selectOptionData:t.optionsList},on:{listenIptValChange:t.listenIptValChg,change:t.selectChnage}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"wedge"}),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.getCheck}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),a("section",[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.protectList,"max-height":t.tableHet}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"cCustname",label:"客户名称",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{property:"cCustdpt",label:"客户部门",align:"center",sortable:"custom"}})],1),t._v(" "),t.protectList.length>0?a("div",{staticClass:"pag-con"},[a("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":t.pageSize,"current-page":t.currPage,layout:"prev, pager, next, sizes",background:"",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(c,r,!1,function(t){a("DDua")},"data-v-ba601ce4",null);e.default=l.exports},DDua:function(t,e){}});