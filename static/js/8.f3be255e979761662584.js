webpackJsonp([8],{Fe8c:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),c=a.n(n),s=a("3pLw"),i={data:function(){return{channelMgr:"",channelMgrNo:"",channelMgrList:[],cAgencyname:"",cAgencyno:"",sellerList:[],cBranchname:"",cBankBranch:"",cRulevalue:"",cContactname0:"",cContactname:[],cContactno:"",contactList:[],cContactdpt:"",cContactposition:"",cContactphone1:"",cContactphone2:"",cSex:"",cContactemail:"",cBirthday2:"",cRemark:"",cVisittime:"",cSummary:"",cContent:""}},components:{filterSelect:a("8BiH").a},mounted:function(){},methods:{routerBack:function(){this.$router.go("-1")},listenIptValChg0:function(t){this.channelMgrNo="",this.channelMgr="",this.getChannelMgrList(t)},listenIptValChg1:function(t){this.cAgencyno="",this.cAgencyname="",this.getSellerList(t)},selectChnage0:function(t){this.channelMgrNo=t.key,this.channelMgr=t.value},selectChnage1:function(t){this.cAgencyno=t.key,this.cAgencyname=t.value},selectChnage4:function(t){""===t[t.length-1]&&this.$router.push({path:"/createContact"})},getChannelMgrList:function(t){var e=this;if(t){var a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),username:t};s.a.post("/crm/sysuser/search",a).then(function(t){if("0000"===t.code){e.channelMgrList=[];var a=t.data.list,n=!0,s=!1,i=void 0;try{for(var l,o=c()(a);!(n=(l=o.next()).done);n=!0){var r=l.value;e.channelMgrList.push({key:r.umAccount,value:r.username})}}catch(t){s=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}}}).catch(function(t){})}},getSellerList:function(t){var e=this;if(t){var a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),agencyKey:t};s.a.post("/crm/nelcontact/searchAgency",a).then(function(t){if("0000"===t.code){e.sellerList=[];var a=t.data.list,n=!0,s=!1,i=void 0;try{for(var l,o=c()(a);!(n=(l=o.next()).done);n=!0){var r=l.value;e.sellerList.push({key:r.cAgencyno,value:r.cAgencyname})}}catch(t){s=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw i}}}}).catch(function(t){})}},dateChange:function(t){this.cBirthday2=this.standardTime(t),this.cVisittime=this.standardTime(t)},submit1:function(){var t=this;if(this.isLegal()){JSON.parse(this.getLocalStorage("address-book-history"));var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cChannelmgr:this.channelMgrNo,cAgencyno:this.cAgencyno,cAgencyname:this.cAgencyname,cRulevalue:this.cRulevalue,cBranchname:this.cBranchname,cBankBranch:this.cBankBranch,cContactname:this.cContactname0,cContactdpt:this.cContactdpt,cContactposition:this.cContactposition,cContactphone1:this.cContactphone1,cContactphone2:this.cContactphone2,cSex:this.cSex,cContactemail:this.cContactemail,cBirthday:this.cBirthday2,cRemark:this.cRemark};s.a.post("/crm/nelcontact/addnelAdrList",e).then(function(e){"0000"===e.code&&(t.$message({message:"添加成功",type:"success"}),t.$router.go(-1))}).catch(function(e){t.$message({message:"添加失败",type:"error"})})}},isLegal:function(){if(!(this.cAgencyname&&this.cContactname0&&this.cContactphone1&&this.cBranchname&&this.cContactdpt))return this.$message({message:"标记红色星号为必填项",type:"warning"}),!1;var t=/(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}/;return t.test(this.cContactphone1)?this.cContactphone2&&!t.test(this.cContactphone2)?(this.$message({message:"联系人电话2格式不正确",type:"error"}),!1):!(this.cContactemail&&!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(this.cContactemail))||(this.$message({message:"邮箱格式不正确",type:"error"}),!1):(this.$message({message:"联系人电话1格式不正确",type:"error"}),!1)}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"create-wrap"},[n("div",{staticClass:"create-main"},[n("span",{staticClass:"create-main-back",on:{click:t.routerBack}},[n("img",{staticClass:"back-icon",attrs:{src:a("0YUB"),alt:""}}),t._v(" "),n("span",{staticClass:"themecolor"},[t._v("返回")])]),t._v(" "),n("span",{staticClass:"create-main-title"},[t._v("新建通讯录")])]),t._v(" "),n("div",{staticClass:"create-main-header"},[n("div",{staticClass:"create-main-body"},[n("el-form",{ref:"form"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"渠道经理",required:""}},[n("filter-select",{staticClass:"wid100pc",attrs:{initVal:t.channelMgr,placeholder:"请输入渠道经理",selectOptionData:t.channelMgrList},on:{listenIptValChange:t.listenIptValChg0,change:t.selectChnage0}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"销售商",required:""}},[n("filter-select",{staticClass:"wid100pc",attrs:{initVal:t.cAgencyname,placeholder:"请输入销售商名称",selectOptionData:t.sellerList},on:{listenIptValChange:t.listenIptValChg1,change:t.selectChnage1}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"分行/分公司",required:""}},[n("el-input",{staticClass:"wid100pc",model:{value:t.cBranchname,callback:function(e){t.cBranchname=e},expression:"cBranchname"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"支行/营业部"}},[n("el-input",{staticClass:"modify-input",model:{value:t.cBankBranch,callback:function(e){t.cBankBranch=e},expression:"cBankBranch"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"联系人姓名",required:""}},[n("el-input",{staticClass:"modify-input",attrs:{maxlength:"10"},model:{value:t.cContactname0,callback:function(e){t.cContactname0=e},expression:"cContactname0"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"联系人部门",required:""}},[n("el-input",{staticClass:"modify-input",attrs:{maxlength:"10"},model:{value:t.cContactdpt,callback:function(e){t.cContactdpt=e},expression:"cContactdpt"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"联系人职位"}},[n("el-input",{staticClass:"modify-input",attrs:{maxlength:"20"},model:{value:t.cContactposition,callback:function(e){t.cContactposition=e},expression:"cContactposition"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"联系电话1",required:""}},[n("el-input",{staticClass:"modify-input",attrs:{maxlength:"13"},model:{value:t.cContactphone1,callback:function(e){t.cContactphone1=e},expression:"cContactphone1"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"联系电话2"}},[n("el-input",{staticClass:"modify-input",attrs:{maxlength:"13"},model:{value:t.cContactphone2,callback:function(e){t.cContactphone2=e},expression:"cContactphone2"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{staticClass:"modify-input",attrs:{placeholder:"请选择性别"},model:{value:t.cSex,callback:function(e){t.cSex=e},expression:"cSex"}},[n("el-option",{attrs:{label:"女",value:"0"}}),t._v(" "),n("el-option",{attrs:{label:"男",value:"1"}})],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"邮箱地址"}},[n("el-input",{staticClass:"modify-input",attrs:{maxlength:"50"},model:{value:t.cContactemail,callback:function(e){t.cContactemail=e},expression:"cContactemail"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"出生日期"}},[n("el-date-picker",{staticClass:"modify-input",attrs:{type:"date",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.cBirthday2,callback:function(e){t.cBirthday2=e},expression:"cBirthday2"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cRemark,expression:"cRemark"}],staticClass:"modify-input tempTextarea",staticStyle:{"-webkit-user-select":"auto"},attrs:{type:"text",maxlength:"160"},domProps:{value:t.cRemark},on:{input:function(e){e.target.composing||(t.cRemark=e.target.value)}}})])],1)],1),t._v(" "),n("div",{staticClass:"btn-box"},[n("el-button",{on:{click:t.routerBack}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.submit1}},[t._v("确定")])],1)],1)],1)])])},staticRenderFns:[]};var o=a("VU/8")(i,l,!1,function(t){a("iHGN")},"data-v-c5b835c6",null);e.default=o.exports},iHGN:function(t,e){}});