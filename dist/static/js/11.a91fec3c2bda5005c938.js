webpackJsonp([11],{Km7W:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),o=a.n(s),r=a("3pLw"),c={data:function(){return{addressBookForm:{cContactmgr:"",cCustno:"",cContactname:"",cContactdpt:"",cContactposition:"",cSex:"",cContactphone1:"",cContactphone2:"",cContactemail:"",cBirthday:"",cRemark:"",address:""},salesManagerList:[],salesMgr:"",custmorNameList:[],tempCCustName:""}},components:{filterSelect:a("8BiH").a},mounted:function(){},methods:{checkEmail:function(){if(!/^[A-Za-zd]+([-_.][A-Za-zd]+)*@([A-Za-zd]+[-.])+[A-Za-zd]{2,5}$/.test(this.addressBookForm.cContactemail))return this.$message({message:"邮箱格式不正确,请重新输入",type:"error"}),this.addressBookForm.cContactemail="",!1},listenIptValChg1:function(t){this.addressBookForm.cContactmgr=t,this.salesManagerList=[],this.checkSalesManager(t)},selectChnage1:function(t){this.addressBookForm.cContactmgr=t.value,this.salesMgr=t.key},listenIptValChg2:function(t){this.addressBookForm.cCustno=t,this.custmorNameList=[],this.checkCustName(t)},selectChnage2:function(t){this.addressBookForm.cCustno=t.value,this.tempCCustName=t.key},checkSalesManager:function(t){var e=this,a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),username:t};r.a.post("/crm/sysuser/search",a).then(function(t){if("0000"===t.code&&t.data.list){var a=t.data.list,s=!0,r=!1,c=void 0;try{for(var n,i=o()(a);!(s=(n=i.next()).done);s=!0){var l=n.value;e.salesManagerList.push({key:l.umAccount,value:l.username})}}catch(t){r=!0,c=t}finally{try{!s&&i.return&&i.return()}finally{if(r)throw c}}}}).catch(function(t){})},checkCustName:function(t){var e=this,a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cCustname:t};r.a.post("/crm/custinfo/searchName",a).then(function(t){if("0000"===t.code&&t.data.list){var a=t.data.list,s=!0,r=!1,c=void 0;try{for(var n,i=o()(a);!(s=(n=i.next()).done);s=!0){var l=n.value;e.custmorNameList.push({key:l.cCustno,value:l.cCustname})}}catch(t){r=!0,c=t}finally{try{!s&&i.return&&i.return()}finally{if(r)throw c}}}}).catch(function(t){})},routerBack:function(){this.$router.go("-1")},onSubmit:function(){var t=this;if(""!=this.addressBookForm.cContactmgr&&""!=this.addressBookForm.cCustno&&""!=this.addressBookForm.cContactname&&""!=this.addressBookForm.cContactphone1&&""!=this.addressBookForm.cContactdpt)if(/(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}/.test(this.addressBookForm.cContactphone1))if(!this.addressBookForm.cContactphone2||/(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}/.test(this.addressBookForm.cContactphone2))if(!this.addressBookForm.cContactemail||/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(this.addressBookForm.cContactemail)){var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cCustno:this.tempCCustName,cCustname:this.addressBookForm.cCustno,cContactmgr:this.salesMgr,cContactname:this.addressBookForm.cContactname,cContactdpt:this.addressBookForm.cContactdpt,cContactposition:this.addressBookForm.cContactposition,cContactphone1:this.addressBookForm.cContactphone1,cContactphone2:this.addressBookForm.cContactphone2,cSex:this.addressBookForm.cSex,cBirthday:this.addressBookForm.cBirthday,cRemark:this.addressBookForm.cRemark,cContactemail:this.addressBookForm.cContactemail};r.a.post("/crm/custinfo/addAdrList",e).then(function(e){"0000"===e.code&&(t.$message({message:"新增成功",type:"success"}),t.routerBack())}).catch(function(e){t.$message({message:"新增失败",type:"error"})})}else this.$message({message:"邮箱格式不正确,请重新输入",type:"error"});else this.$message({message:"联系电话2格式不正确,请重新输入",type:"error"});else this.$message({message:"联系电话1格式不正确,请重新输入",type:"error"});else this.$message({message:"标记红色星号为必填项",type:"warning"})},changeCBirthday:function(t){this.addressBookForm.cBirthday=this.standardTime(t)}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"createAddressBookAndVisitRecord-wrap pad10"},[s("div",{staticClass:"createAddressBookAndVisitRecord-main"},[s("span",{staticClass:"createAddressBookAndVisitRecord-main-back",on:{click:t.routerBack}},[s("img",{staticClass:"back-icon",attrs:{src:a("0YUB"),alt:""}}),t._v(" "),s("i",{staticStyle:{"padding-left":"5px",color:"#cf9f68"}},[t._v("返回")])]),t._v(" "),s("span",{staticClass:"createAddressBookAndVisitRecord-main-title"},[t._v("新增通讯录")])]),t._v(" "),s("div",{staticClass:"createAddressBookAndVisitRecord-main-header pad10"},[s("div",{staticClass:"createAddressBookAndVisitRecord-main-body"},[s("el-form",{ref:"form",attrs:{model:t.addressBookForm}},[s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"销售经理",required:""}},[s("filter-select",{staticClass:"wid100pc",attrs:{initVal:t.addressBookForm.cContactmgr,placeholder:"查询销售经理",selectOptionData:t.salesManagerList},on:{listenIptValChange:t.listenIptValChg1,change:t.selectChnage1}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构名称",required:""}},[s("filter-select",{staticClass:"wid100pc",attrs:{initVal:t.addressBookForm.cCustno,placeholder:"请输入机构名称关键词",selectOptionData:t.custmorNameList},on:{listenIptValChange:t.listenIptValChg2,change:t.selectChnage2}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人姓名",required:""}},[s("el-input",{staticClass:"modify-input",attrs:{placeholder:"请输入联系人姓名",maxlength:"160"},model:{value:t.addressBookForm.cContactname,callback:function(e){t.$set(t.addressBookForm,"cContactname",e)},expression:"addressBookForm.cContactname"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人部门",required:""}},[s("el-input",{staticClass:"modify-input",attrs:{placeholder:"请输入联系人部门",maxlength:"160"},model:{value:t.addressBookForm.cContactdpt,callback:function(e){t.$set(t.addressBookForm,"cContactdpt",e)},expression:"addressBookForm.cContactdpt"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系人职位"}},[s("el-input",{staticClass:"modify-input",attrs:{placeholder:"请输入联系人职位",maxlength:"160"},model:{value:t.addressBookForm.cContactposition,callback:function(e){t.$set(t.addressBookForm,"cContactposition",e)},expression:"addressBookForm.cContactposition"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"性别"}},[s("el-select",{staticClass:"modify-input",attrs:{placeholder:"请选择"},model:{value:t.addressBookForm.cSex,callback:function(e){t.$set(t.addressBookForm,"cSex",e)},expression:"addressBookForm.cSex"}},[s("el-option",{attrs:{label:"女",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"男",value:"1"}})],1)],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系电话1",required:""}},[s("el-input",{staticClass:"modify-input",attrs:{maxlength:"13",placeholder:"请输入联系电话1"},model:{value:t.addressBookForm.cContactphone1,callback:function(e){t.$set(t.addressBookForm,"cContactphone1",e)},expression:"addressBookForm.cContactphone1"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"联系电话2"}},[s("el-input",{staticClass:"modify-input",attrs:{maxlength:"13",placeholder:"请输入联系电话2"},model:{value:t.addressBookForm.cContactphone2,callback:function(e){t.$set(t.addressBookForm,"cContactphone2",e)},expression:"addressBookForm.cContactphone2"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"邮箱地址"}},[s("el-input",{staticClass:"modify-input",attrs:{placeholder:"请输入邮箱地址"},model:{value:t.addressBookForm.cContactemail,callback:function(e){t.$set(t.addressBookForm,"cContactemail",e)},expression:"addressBookForm.cContactemail"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"出生日期"}},[s("el-date-picker",{staticClass:"modify-input",attrs:{editable:!1,type:"date",placeholder:"选择日期"},on:{change:t.changeCBirthday},model:{value:t.addressBookForm.cBirthday,callback:function(e){t.$set(t.addressBookForm,"cBirthday",e)},expression:"addressBookForm.cBirthday"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"备注"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addressBookForm.cRemark,expression:"addressBookForm.cRemark"}],staticClass:"modify-input tempTextarea",staticStyle:{"-webkit-user-select":"auto"},attrs:{type:"text",maxlength:"160"},domProps:{value:t.addressBookForm.cRemark},on:{input:function(e){e.target.composing||t.$set(t.addressBookForm,"cRemark",e.target.value)}}})])],1)],1),t._v(" "),s("div",{staticClass:"btn-box"},[s("el-button",{on:{click:t.routerBack}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")])],1)],1)],1)])])},staticRenderFns:[]};var i=a("VU/8")(c,n,!1,function(t){a("qKCG")},"data-v-81991258",null);e.default=i.exports},qKCG:function(t,e){}});