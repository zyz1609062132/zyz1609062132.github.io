webpackJsonp([18],{HfVN:function(t,e){},"bV+R":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("BO1k"),a=s.n(n),r=s("3pLw"),o=(s("EuEE"),s("KBWm")),c=(s("y1vT"),{data:function(){return{cCustno:"",cCustname:"",cCustnameList:[],custmorNameList:[],list:[],tableData:[],timeout:null,currPage:1,pageSize:50,totalSize:1,loading:null,currencyUnit3:"100000000",sortName:"",sortStyle:"",scaleStaticObj:{}}},components:{filterSelect:s("8BiH").a,currencyUnit:o.a},mounted:function(){this.getUserInfo(),this.getCustomerInfoList(),sessionStorage.removeItem("activeName"),this.cCustnameList=this.custmorNameList},created:function(){this.getLocalStorage("unit")?this.currencyUnit3=this.getLocalStorage("unit"):this.currencyUnit3="100000000"},methods:{getSummaries:function(t){var e=this,s=t.columns,n=(t.data,[]);return s.forEach(function(t,s){0!==s?1!=s&&2!=s?3==s?n[s]=e.numFormat(e.scaleStaticObj.fundScaleSum/e.currencyUnit3):4==s?n[s]=e.numFormat(e.scaleStaticObj.fMonetarAssetsSum/e.currencyUnit3):5==s?n[s]=e.numFormat(e.scaleStaticObj.fNonmonetaryAssetsSum/e.currencyUnit3):6==s?n[s]=e.numFormat(e.scaleStaticObj.fEtfAssetsSum/e.currencyUnit3):7==s&&(n[s]=e.numFormat(e.scaleStaticObj.fAccountAssetsSum/e.currencyUnit3)):n[s]="":n[s]="合计"}),n},sortMethod:function(t){t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.getCustomerInfoList()):(this.sortName="",this.sortStyle="",this.getCustomerInfoList())},listenUnitChange3:function(t){this.currencyUnit3=t,this.setLocalStorage("unit",t)},getUserInfo:function(){var t=this,e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username")};r.a.post("/crm/custinfo/getUserInfo",e).then(function(e){if("0000"===e.code){var s=e.data;t.setSessionStorage("usernameOfThisPeople",s)}}).catch(function(t){})},handleCurrentChange:function(t){this.currPage=t,this.getCustomerInfoList()},handleSizeChange:function(t){this.pageSize=t,this.currPage=1,this.getCustomerInfoList()},custTypeFormatter:function(t){var e="";switch(t.cCustType){case"0":e="银行";break;case"1":e="保险";break;case"2":e="券商";break;case"3":e="财务公司";break;case"4":e="资产管理计划";break;case"5":e="其他"}return e},selectChnage:function(t){this.cCustname=t.value,this.cCustno=t.key},listenIptValChg:function(t){this.cCustname=t,this.checkCustName(t)},checkCustName:function(t){var e=this,s={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),cCustname:t};r.a.post("/crm/custinfo/searchName",s).then(function(t){if("0000"===t.code){e.custmorNameList=[];var s=t.data.list,n=!0,r=!1,o=void 0;try{for(var c,i=a()(s);!(n=(c=i.next()).done);n=!0){var u=c.value;e.custmorNameList.push({key:u.cCustno,value:u.cCustname})}}catch(t){r=!0,o=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}}).catch(function(t){})},querySearch:function(t,e){var s=this.cCustnameList,n=t?s.filter(this.createFilter(t)):s;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(n)},500*Math.random())},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){},goToDetail:function(t){t.cCustno&&(this.setSessionStorage("cCustno",t.cCustno),this.$router.push({path:"customerDetail",query:{currencyUnit:this.currencyUnit3}}))},getCustomerInfoList:function(){var t=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),umAccount:this.getLocalStorage("username"),cCustno:this.cCustno?this.cCustno:"",sortStyle:this.sortStyle,sortName:this.sortName,page:this.currPage,limit:this.pageSize};r.a.post("/crm/custInfo/selectAccomgrList",e).then(function(e){"0000"===e.code&&e.data.list&&(t.tableData=e.data.list,t.totalSize=e.data.totalCount,t.scaleStaticObj.fundScaleSum=e.data.fundScaleSum,t.scaleStaticObj.fMonetarAssetsSum=e.data.fMonetarAssetsSum,t.scaleStaticObj.fNonmonetaryAssetsSum=e.data.fNonmonetaryAssetsSum,t.scaleStaticObj.fEtfAssetsSum=e.data.fEtfAssetsSum,t.scaleStaticObj.fAccountAssetsSum=e.data.fAccountAssetsSum),setTimeout(function(){t.loading.close()},500)}).catch(function(e){setTimeout(function(){t.loading.close()},500)})},cCheckCustList:function(){this.currPage=1,this.pageSize=50,this.getCustomerInfoList()},tableRowClassName:function(t){t.row,t.rowIndex;return"background-color: #FAFAFA;"},tableHeaderColor:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;if(0===e)return"background-color: #F5ECE1;"},renderheader:function(t,e){var s=e.column;e.$index;return t("span",{},[t("span",{},s.label.split("/")[0]),t("br"),t("span",{},s.label.split("/")[1])])}}}),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"customerInfo-warp pad10"},[t._m(0),t._v(" "),s("div",{staticClass:"customerInfo-main-form"},[t._m(1),t._v(" "),s("div",{staticClass:"main-right"},[s("filter-select",{attrs:{initVal:t.cCustname,round:"",placeholder:"请输入客户名称关键字",selectOptionData:t.custmorNameList},on:{listenIptValChange:t.listenIptValChg,change:t.selectChnage}}),t._v(" "),s("el-button",{attrs:{round:""},on:{click:t.cCheckCustList}},[t._v("查询")]),t._v(" "),s("currency-unit",{attrs:{defaultCurrencyUnit:t.currencyUnit3},on:{listenUnitChange:t.listenUnitChange3}})],1)]),t._v(" "),s("div",{staticClass:"customerInfo-body-table"},[s("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":t.tableHeaderColor,"row-class-name":t.tableRowClassName,stripe:"",data:t.tableData,"max-height":"500","summary-method":t.getSummaries,"show-summary":""},on:{"row-click":t.goToDetail,"sort-change":t.sortMethod}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"cCustname",label:"客户名称",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.cCustname?e.row.cCustname:"--"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"cCustType",label:"机构类型",align:"center",sortable:"custom"}}),t._v(" "),s("el-table-column",{attrs:{label:"公募规模合计",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.numFormat((e.row.fMonetarAssets+e.row.fNonmonetaryAssets+e.row.fEtfAssets)/t.currencyUnit3)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fMonetarAssets",label:"货币规模",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.fMonetarAssets?s("span",[t._v(t._s(e.row.fMonetarAssets))]):s("span",[t._v(t._s(t.numFormat(e.row.fMonetarAssets/t.currencyUnit3)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fNonmonetaryAssets",label:"非货规模/(不含ETF及联接)",align:"center","render-header":t.renderheader,sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.fNonmonetaryAssets?s("span",[t._v(t._s(e.row.fNonmonetaryAssets))]):s("span",[t._v(t._s(t.numFormat(e.row.fNonmonetaryAssets/t.currencyUnit3)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fEtfAssets",label:"ETF规模/(及联接基金)",align:"center","render-header":t.renderheader,sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.fEtfAssets?s("span",[t._v(t._s(e.row.fEtfAssets))]):s("span",[t._v(t._s(t.numFormat(e.row.fEtfAssets/t.currencyUnit3)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fAccountAssets",label:"专户规模",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.fAccountAssets?s("span",[t._v(t._s(e.row.fAccountAssets))]):s("span",[t._v(t._s(t.numFormat(e.row.fAccountAssets/t.currencyUnit3)))])]}}])})],1)],1),t._v(" "),t.tableData.length>0?s("div",{staticClass:"customerInfo-footer"},[s("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":t.pageSize,"current-page":t.currPage,layout:"prev, pager, next, sizes",background:"",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"customerInfo-head"},[e("div",{staticClass:"head-title"},[e("span",{staticStyle:{"font-size":"14px"}},[this._v("客户列表")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-left"},[e("span",[this._v("客户列表")])])}]};var u=s("VU/8")(c,i,!1,function(t){s("HfVN")},"data-v-62b6ed5e",null);e.default=u.exports}});