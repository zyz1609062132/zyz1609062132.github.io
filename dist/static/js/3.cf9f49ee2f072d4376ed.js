webpackJsonp([3],{"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},Gu7T:function(t,e,a){"use strict";e.__esModule=!0;var n,s=a("c/Tr"),r=(n=s)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,r.default)(t)}},Vxag:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Gu7T"),s=a.n(n),r=a("Dd8w"),i=a.n(r),l=a("b8UZ"),c=a("3pLw"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"headback-main"},[e("span",{staticClass:"headback-main-back",on:{click:this.routerBack}},[e("img",{staticClass:"back-icon",attrs:{src:a("0YUB"),alt:""}}),this._v(" "),e("span",{staticClass:"themecolor"},[this._v("返回")])]),this._v(" "),e("span",{staticClass:"headback-main-title"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var u=a("VU/8")({data:function(){return{}},props:["title","backRouter"],methods:{routerBack:function(){this.backRouter?this.$router.push({path:this.backRouter}):this.$router.go("-1")}}},o,!1,function(t){a("ySJ2")},"data-v-48f7688d",null).exports,d=a("KBWm"),f=(a("Ya8g"),{0:"货币",1:"债券",2:"股票",3:"混合",4:"指数",5:"ETF及联接"}),h={computed:i()({},Object(l.b)(["date1","date2","date3"])),watch:{date:function(t){this.$store.commit("date1",t)}},data:function(){return{cFundclass:"",fundType:"",fundType2:"",cLabel:"",date:"",currencyUnit:"100000000",tableData:[],page:1,limit:500,totalSize:1,tableHet:500,loading:null,sortName:"",sortStyle:""}},components:{headBack:u,currencyUnit:d.a},mounted:function(){if(this.$route.query.cFundclass){var t=this.$route.query.cFundclass;this.date=this.date1,this.cFundclass=t||"",this.fundType=f[t],this.getFundScaleList()}else this.$route.query.arr&&(this.cLabel=this.$route.query.arr,this.fundType2=this.$route.query.arr,this.date=this.date1,this.getFundScaleListOfLabel())},created:function(){this.getLocalStorage("unit")?this.currencyUnit=this.getLocalStorage("unit"):this.currencyUnit="100000000"},methods:{getSummaries:function(t){var e=this,a=t.columns,n=t.data,s=[];return a.forEach(function(t,a){if(0!==a)if(1!=a&&2!=a&&4!=a&&6!=a){var r=n.filter(function(t){return!t.isStatistics}).map(function(e){return Number(e[t.property])});if(r.every(function(t){return isNaN(t)}))s[a]="N/A";else{var i=r.reduce(function(t,a){return t+a/e.currencyUnit},0);s[a]=e.numFormat(i)}}else s[a]="";else s[a]="合计"}),s},sortMethod:function(t){console.log("param",t),t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.cFundclass?this.getFundScaleList():this.cLabel&&this.getFundScaleListOfLabel()):(this.sortName="",this.sortStyle="",this.cFundclass?this.getFundScaleList():this.cLabel&&this.getFundScaleListOfLabel())},getFundScaleListOfLabel:function(){var t=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dCDate:this.date,cLabel:this.cLabel,sortStyle:this.sortStyle,sortName:this.sortName,page:this.page,limit:this.limit};c.a.post("/crm/fund/labelScale",e).then(function(e){"0000"==e.code&&(t.totalSize=e.data.totalCount,t.tableData=e.data.list,t.tableData.length>0&&t.standardData(e.data.list),t.loading.close(),t.tableHet=window.innerHeight-150)}).catch(function(e){t.loading.close()})},getFundScaleList:function(){var t=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dCDate:this.date,cFundclass:this.cFundclass,sortStyle:this.sortStyle,sortName:this.sortName,page:this.page,limit:this.limit};c.a.post("/crm/fund/selectBondFundscale",e).then(function(e){"0000"==e.code&&(t.totalSize=e.data.totalCount,t.tableData=e.data.list,t.tableData.length>0&&t.standardData(e.data.list),t.loading.close(),t.tableHet=window.innerHeight-150)}).catch(function(e){t.loading.close()})},standardData:function(t){if("1"==this.cFundclass||"4"==this.cFundclass||"5"==this.cFundclass){var e=[],a=[],n=[],r=[],i=[],l={cFundName:"",isStatistics:!0,fNetValue:"-",fEnterPriseScale:0,enterprisePercent:0,fRetailScale:0,retailPercent:0,fTotalScale:0},c={cFundName:"",isStatistics:!0,fNetValue:"-",fEnterPriseScale:0,enterprisePercent:0,fRetailScale:0,retailPercent:0,fTotalScale:0},o={cFundName:"",isStatistics:!0,fNetValue:"-",fEnterPriseScale:0,enterprisePercent:0,fRetailScale:0,retailPercent:0,fTotalScale:0},u={cFundName:"",isStatistics:!0,fNetValue:"-",fEnterPriseScale:0,enterprisePercent:0,fRetailScale:0,retailPercent:0,fTotalScale:0};for(var d in t)"0"==t[d].cFundSubclass||"4"==t[d].cFundSubclass||"6"==t[d].cFundSubclass?(e.push(d),d,l.cFundName=t[d].cFundSubclassDesc+"合计",l.fEnterPriseScale+=Number(t[d].fEnterPriseScale),l.fRetailScale+=Number(t[d].fRetailScale),l.fTotalScale+=Number(t[d].fTotalScale),l.enterprisePercent=(l.fEnterPriseScale/l.fTotalScale*100).toFixed(2),l.retailPercent=(l.fRetailScale/l.fTotalScale*100).toFixed(2)):"1"==t[d].cFundSubclass||"5"==t[d].cFundSubclass||"7"==t[d].cFundSubclass?(a.push(d),d,c.cFundName=t[d].cFundSubclassDesc+"合计",c.fEnterPriseScale+=Number(t[d].fEnterPriseScale),c.fRetailScale+=Number(t[d].fRetailScale),c.fTotalScale+=Number(t[d].fTotalScale),c.enterprisePercent=(c.fEnterPriseScale/c.fTotalScale*100).toFixed(2),c.retailPercent=(c.fRetailScale/c.fTotalScale*100).toFixed(2)):"2"==t[d].cFundSubclass?(n.push(d),d,o.cFundName=t[d].cFundSubclassDesc+"合计",o.fEnterPriseScale+=Number(t[d].fEnterPriseScale),o.fRetailScale+=Number(t[d].fRetailScale),o.fTotalScale+=Number(t[d].fTotalScale),o.enterprisePercent=(o.fEnterPriseScale/o.fTotalScale*100).toFixed(2),o.retailPercent=(o.fRetailScale/o.fTotalScale*100).toFixed(2)):"3"==t[d].cFundSubclass?(r.push(d),d,u.cFundName=t[d].cFundSubclassDesc+"合计",u.fEnterPriseScale+=Number(t[d].fEnterPriseScale),u.fRetailScale+=Number(t[d].fRetailScale),u.fTotalScale+=Number(t[d].fTotalScale),u.enterprisePercent=(u.fEnterPriseScale/u.fTotalScale*100).toFixed(2),u.retailPercent=(u.fRetailScale/u.fTotalScale*100).toFixed(2)):i.push(d);var f=[],h=[],S=[],m=[],p=[],b=[],g=[],y=[],v=[];if(e.length>0)for(var F in h=[l],e)f.push(this.tableData[e[F]]);if(a.length>0)for(var _ in m=[c],a)S.push(this.tableData[a[_]]);if(n.length>0)for(var N in b=[o],n)p.push(this.tableData[n[N]]);if(r.length>0)for(var k in y=[u],r)g.push(this.tableData[r[k]]);if(i.length>0)for(var T in i)v.push(this.tableData[i[T]]);this.tableData=[].concat(f,s()(h),S,s()(m),p,s()(b),g,s()(y),v)}},scaleDateChange:function(t){this.date=this.standardTime(t),this.getFundScaleList()},listenUnitChange:function(t){this.currencyUnit=t,this.setLocalStorage("unit",t)},tableRowClassName:function(t){t.row,t.rowIndex},tableCellClassName:function(t){if("1"==t.columnIndex&&t.row.isStatistics)return"is-right blod"},handleCurrentChange:function(t){this.page=t,this.getFundScaleList()},handleSizeChange:function(t){this.limit=t,this.getFundScaleList()},goToDetail:function(t){t.row.cFundCode&&this.$router.push({path:"/crm/scaleDetail",query:{cFundCode:t.row.cFundCode,dCDate:this.date,cFundName:t.row.cFundName}})}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-home-scale marL10 marR10 marBtm10"},[a("head-back",{attrs:{backRouter:"/crm/home",title:this.fundType?t.fundType+"型基金规模":t.fundType2+"基金规模情况"}}),t._v(" "),a("div",{staticClass:"backWhite padL10 padR10 padBtm10"},[a("div",{staticClass:"con hidden linehet45"},[a("span",{staticClass:"right"},[a("el-date-picker",{staticClass:"datepicker withoutBorder",attrs:{type:"date",placeholder:"选择日期"},on:{change:t.scaleDateChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),a("currency-unit",{attrs:{defaultCurrencyUnit:t.currencyUnit},on:{listenUnitChange:t.listenUnitChange}})],1)]),t._v(" "),a("div",{},[a("el-table",{staticStyle:{width:"100%"},attrs:{"cell-class-name":t.tableCellClassName,"max-height":t.tableHet,stripe:"",data:t.tableData,"summary-method":t.getSummaries,"show-summary":""},on:{"sort-change":t.sortMethod}},[a("el-table-column",{attrs:{property:"rowNum",label:"序号",width:"48",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.rowNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"cFundName",label:"基金名称",width:"180",align:"",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.goToDetail(e)}}},[t._v(t._s(e.row.cFundName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fNetValue",label:"单位净值",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.goToDetail(e)}}},[t._v(t._s(e.row.fNetValue))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fEnterPriseScale",label:"机构客户持有规模",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.goToDetail(e)}}},[t._v(t._s(t.numFormat(e.row.fEnterPriseScale/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"enterprisePercent",label:"机构占比(%)",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.goToDetail(e)}}},[t._v(t._s(e.row.enterprisePercent))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fRetailScale",label:"个人客户持有规模",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.goToDetail(e)}}},[t._v(t._s(t.numFormat(e.row.fRetailScale/t.currencyUnit)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"retailPercent",label:"个人占比(%)",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.goToDetail(e)}}},[t._v(t._s(e.row.retailPercent))])]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"fTotalScale",label:"总规模",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(a){t.goToDetail(e)}}},[t._v(t._s(t.numFormat(e.row.fTotalScale/t.currencyUnit)))])]}}])})],1)],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(h,S,!1,function(t){a("c+Cv")},"data-v-0eab68d2",null);e.default=m.exports},Ya8g:function(t,e){},"c+Cv":function(t,e){},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(t,e,a){"use strict";var n=a("evD5"),s=a("X8DO");t.exports=function(t,e,a){e in t?n.f(t,e,s(0,a)):t[e]=a}},qyJz:function(t,e,a){"use strict";var n=a("+ZMJ"),s=a("kM2E"),r=a("sB3e"),i=a("msXi"),l=a("Mhyx"),c=a("QRG4"),o=a("fBQ2"),u=a("3fs2");s(s.S+s.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,s,d,f=r(t),h="function"==typeof this?this:Array,S=arguments.length,m=S>1?arguments[1]:void 0,p=void 0!==m,b=0,g=u(f);if(p&&(m=n(m,S>2?arguments[2]:void 0,2)),void 0==g||h==Array&&l(g))for(a=new h(e=c(f.length));e>b;b++)o(a,b,p?m(f[b],b):f[b]);else for(d=g.call(f),a=new h;!(s=d.next()).done;b++)o(a,b,p?i(d,m,[s.value,b],!0):s.value);return a.length=b,a}})},ySJ2:function(t,e){}});