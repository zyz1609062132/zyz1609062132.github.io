webpackJsonp([34],{IJCD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),s=a.n(n),c=a("Dd8w"),l=a.n(c),i=a("b8UZ"),r=a("3pLw"),o=a("KBWm"),u=a("z/fv"),d=a("8BiH"),h={computed:l()({},Object(i.b)(["date1","date2","date3"]),{salerDate1:function(){return this.date2},salerDate2:function(){return this.date3}}),watch:{salerDate1:function(e){this.$store.commit("date2",e)},salerDate2:function(e){this.$store.commit("date3",e)}},data:function(){var e=this;return{activeName:"0",pickerOptions1:{disabledDate:function(t){return e.salerDate1?t.getTime()>Date.now()||t.getTime()>e.salerDate2:t.getTime()<e.salerDate2}},pickerOptions2:{disabledDate:function(t){return t.getTime()<e.salerDate1||t.getTime()>Date.now()}},currencyUnit:"100000000",cFundclass:[],SellerTableData:[],cAgencyclassList:[],tableHet:500,loading:null,cAgencyclass:this.$route.query.cAgencyclass,page:1,limit:50,totalSize:1,cAgencyname:"",cAgencyno:"",sellerList:[],checkedSellers:[],prevCheckedSellerId:[],dialogVisible:!1,sortName:"",sortStyle:"",sellerScaleStaticObj:{}}},components:{currencyUnit:o.a,custType:u.a,filterSelect:d.a},mounted:function(){this.getSalerScalechgList(),this.getCAgencyclassList()},beforeDestroy:function(){},created:function(){this.getLocalStorage("unit")?this.currencyUnit=this.getLocalStorage("unit"):this.currencyUnit="100000000"},methods:{getSummaries:function(e){var t=this,a=e.columns,n=(e.data,[]);return a.forEach(function(e,a){0!==a?1!=a?2==a?n[a]=t.numFormat(t.sellerScaleStaticObj.beginFAssetSum/t.currencyUnit):3==a?n[a]=t.numFormat(t.sellerScaleStaticObj.endFAssetSum/t.currencyUnit):4==a?n[a]=t.numFormat(t.sellerScaleStaticObj.fCurpurchaseSum/t.currencyUnit):5==a?n[a]=t.numFormat(t.sellerScaleStaticObj.fCurredemptionSum/t.currencyUnit):6==a&&(n[a]=t.numFormat(t.sellerScaleStaticObj.fNetPurchaseRedemptionSum/t.currencyUnit)):n[a]="":n[a]="合计"}),n},sortMethod:function(e){e.prop?(this.sortName=e.prop,"ascending"==e.order?this.sortStyle="up":"descending"==e.order?this.sortStyle="low":""==e.order&&(this.sortName="",this.sortStyle),this.getSalerScalechgList()):(this.sortName="",this.sortStyle="",this.getSalerScalechgList())},listencAgencyclassChange:function(){this.getSalerScalechgList()},getCAgencyclassList:function(){var e=this,t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),page:1,limit:1e3};r.a.post("/crm/fund/agencyTypeFundInfo",t).then(function(t){"0000"==t.code&&(e.cAgencyclassList=t.data.list)}).catch(function(e){})},routerBack:function(){this.$router.go("-1")},getEnterDate:function(){var e=this,t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username")};r.a.post("/crm/fund/queryRunDataTime",t).then(function(t){"0000"==t.code&&(e.salerDate1=t.data.dBegindate,e.salerDate2=t.data.dCDate),e.getSalerScalechgList()}).catch(function(e){})},getSalerScalechgList:function(){var e=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var t={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dBegindate:this.standardTime(this.salerDate1),dEnddate:this.standardTime(this.salerDate2),cAgencyclass:this.cAgencyclass,cAgencyno:this.cAgencyno,sortStyle:this.sortStyle,sortName:this.sortName,page:this.page,limit:this.limit};r.a.post("/crm/fund/agencyScaleChangedInfo",t).then(function(t){"0000"==t.code&&(e.totalSize=t.data.totalCount,t.data.list?e.SellerTableData=t.data.list:e.SellerTableData=[],e.tableHet=window.innerHeight-150,e.sellerScaleStaticObj.beginFAssetSum=t.data.beginFAssetSum,e.sellerScaleStaticObj.endFAssetSum=t.data.endFAssetSum,e.sellerScaleStaticObj.fCurpurchaseSum=t.data.fCurpurchaseSum,e.sellerScaleStaticObj.fCurredemptionSum=t.data.fCurredemptionSum,e.sellerScaleStaticObj.fNetPurchaseRedemptionSum=t.data.fNetPurchaseRedemptionSum),e.loading.close()}).catch(function(t){e.loading.close()})},listenIptValChg1:function(e){e&&this.getSellerList(e)},selectChnage1:function(e){-1==this.prevCheckedSellerId.indexOf(e.key)&&(this.checkedSellers.push(e),this.prevCheckedSellerId.push(e.key))},getSellerList:function(e){var t=this;if(e){var a={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),agencyKey:e};r.a.post("/crm/nelcontact/searchAgency",a).then(function(e){if("0000"===e.code){t.sellerList=[];var a=e.data.list,n=!0,c=!1,l=void 0;try{for(var i,r=s()(a);!(n=(i=r.next()).done);n=!0){var o=i.value;t.sellerList.push({key:o.cAgencyno,value:o.cAgencyname})}}catch(e){c=!0,l=e}finally{try{!n&&r.return&&r.return()}finally{if(c)throw l}}}}).catch(function(e){})}},listenUnitChange:function(e){this.currencyUnit=e,this.setLocalStorage("unit",e)},dateChange:function(e){this.getSalerScalechgList()},handleSizeChange:function(e){this.limit=e,this.getSalerScalechgList()},handleCurrentChange:function(e){this.page=e,this.getSalerScalechgList()},goToDetail:function(e){this.$router.push({path:"/crm/sellerSclChg",query:{cCrmagencyno:e.row.cCrmagencyno,cAgencyname:e.row.cAgencyName}}),this.setSessionStorage("report-memory-index",this.activeName)},handleClose:function(e){e()},removeCheckedSeller:function(e){this.prevCheckedSellerId.splice(e,1),this.checkedSellers.splice(e,1)},resetCheckFund:function(){this.checkedSellers=[],this.prevCheckedSellerId=[],this.$refs.filterSelect.iptVal=""},dialogEnsure:function(){this.cAgencyno=this.prevCheckedSellerId.join(),this.dialogVisible=!1,this.getSalerScalechgList()}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"backWhite pad10"},[n("span",{staticClass:"main-back",on:{click:e.routerBack}},[n("img",{staticClass:"back-icon",attrs:{src:a("0YUB"),alt:""}})]),e._v(" "),n("div",[n("div",{staticClass:"marBtm10"},[n("div",{staticClass:"hidden con"},[n("span",{staticClass:"left ft18 linehet45 blod"},[e._v("销售商规模变动情况")]),e._v(" "),n("span",{staticClass:"right"},[n("el-select",{staticClass:"withoutBorder",attrs:{placeholder:"销售商类型"},on:{change:e.listencAgencyclassChange},model:{value:e.cAgencyclass,callback:function(t){e.cAgencyclass=t},expression:"cAgencyclass"}},e._l(e.cAgencyclassList,function(e){return n("el-option",{key:e.cAgencyclass,attrs:{label:e.cAgencyclassName,value:e.cAgencyclass}})})),e._v(" "),n("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"开始日期","picker-options":e.pickerOptions1},on:{change:e.dateChange},model:{value:e.salerDate1,callback:function(t){e.salerDate1=t},expression:"salerDate1"}}),e._v(" "),n("el-date-picker",{staticClass:"withoutBorder short",attrs:{type:"date",placeholder:"结束日期","picker-options":e.pickerOptions2,disabled:""==e.salerDate1||null==e.salerDate1},on:{change:e.dateChange},model:{value:e.salerDate2,callback:function(t){e.salerDate2=t},expression:"salerDate2"}}),e._v(" "),n("currency-unit",{attrs:{defaultCurrencyUnit:e.currencyUnit},on:{listenUnitChange:e.listenUnitChange}})],1)]),e._v(" "),n("div",{staticClass:"hidden"},[n("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.SellerTableData,"max-height":e.tableHet,"summary-method":e.getSummaries,"show-summary":""},on:{"sort-change":e.sortMethod}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{property:"cAgencyName",label:"销售商",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(a){e.goToDetail(t)}}},[e._v(e._s(t.row.cAgencyName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"beginFAsset",label:"期初规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(a){e.goToDetail(t)}}},[e._v(e._s(e.numFormat(t.row.beginFAsset/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"endFAsset",label:"期末规模",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(a){e.goToDetail(t)}}},[e._v(e._s(e.numFormat(t.row.endFAsset/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fCurpurchase",label:"总申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(a){e.goToDetail(t)}}},[e._v(e._s(e.numFormat(t.row.fCurpurchase/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fCurredemption",label:"总赎回",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(a){e.goToDetail(t)}}},[e._v(e._s(e.numFormat(t.row.fCurredemption/e.currencyUnit)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"fNetPurchaseRedemption",label:"净申购",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(a){e.goToDetail(t)}}},[e._v(e._s(e.numFormat(t.row.fNetPurchaseRedemption/e.currencyUnit)))])]}}])})],1)],1),e._v(" "),e.SellerTableData.length>0?n("div",{staticClass:"pag-con"},[n("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":e.limit,"current-page":e.page,layout:"prev, pager, next, sizes",background:"",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()]),e._v(" "),n("el-dialog",{staticClass:"dialog-con",attrs:{title:"请选择销售商",visible:e.dialogVisible,width:"45%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("filter-select",{ref:"filterSelect",staticClass:"wid300",attrs:{initVal:e.cAgencyname,round:"",placeholder:"请输入销售商名称",selectOptionData:e.sellerList},on:{listenIptValChange:e.listenIptValChg1,change:e.selectChnage1}}),e._v(" "),n("ul",{staticClass:"checkfunds"},[n("span",{staticClass:"title"},[e._v("已选销售商：")]),e._v(" "),e._l(e.checkedSellers,function(t,a){return n("li",{key:a,staticClass:"fund",on:{click:function(t){e.removeCheckedSeller(a)}}},[e._v("\n            "+e._s(t.value)+"\n            "),n("i",{staticClass:"fund-remove"})])})],2)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.resetCheckFund}},[e._v("重 置")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.dialogEnsure}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var m=a("VU/8")(h,g,!1,function(e){a("dO+Y")},"data-v-06445a53",null);t.default=m.exports},"dO+Y":function(e,t){}});