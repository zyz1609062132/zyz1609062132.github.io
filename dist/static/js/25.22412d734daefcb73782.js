webpackJsonp([25],{"7f2R":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),r=a("b8UZ"),o=a("3pLw"),i=a("KBWm"),l={computed:n()({},Object(r.b)(["date1","date2","date3"])),watch:{DateChange1:function(t){this.$store.commit("date1",t)},DateChange2:function(t){this.$store.commit("date1",t)}},data:function(){return{activeName:"first",cFundName:"",holderDate:"",agencyDate:"",currencyUnit:"100000000",holderReportData:[],tableHet0:500,tableHet:500,currPage:1,pageSize:50,totalSize:1,aggencySellData:[],loading:null,sortName:"",sortStyle:"",saleTotalStaticObj:{}}},components:{currencyUnit:i.a},mounted:function(){this.$route.query.cFundCode&&(this.cFundName=this.$route.query.cFundName,this.cFundCode=this.$route.query.cFundCode,this.holderDate=this.date1,this.agencyDate=this.date1,this.getHolderReportList())},created:function(){this.getLocalStorage("unit")?this.currencyUnit=this.getLocalStorage("unit"):this.currencyUnit="100000000"},methods:{getSummaries:function(t){var e=this,a=t.columns,s=t.data,n=[];return a.forEach(function(t,a){if(0!==a)if(1!=a&&2!=a&&5!=a){var r=s.filter(function(t){return!t.isStatistics}).map(function(e){return Number(e[t.property])});if(r.every(function(t){return isNaN(t)}))n[a]="N/A";else{var o=r.reduce(function(t,a){return t+a/e.currencyUnit},0);n[a]=e.numFormat(o)}}else n[a]="";else n[a]="合计"}),n},getSummaries2:function(t){var e=this,a=t.columns,s=(t.data,[]);return a.forEach(function(t,a){0!==a?1!=a&&4!=a?2==a?s[a]=e.numFormat(e.saleTotalStaticObj.fLastshareSum/e.currencyUnit):3==a&&(s[a]=e.numFormat(e.saleTotalStaticObj.fLastassetSum/e.currencyUnit)):s[a]="":s[a]="合计"}),s},sortMethod:function(t){t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.getHolderReportList()):(this.sortName="",this.sortStyle="",this.getHolderReportList())},sortMethod2:function(t){t.prop?(this.sortName=t.prop,"ascending"==t.order?this.sortStyle="up":"descending"==t.order?this.sortStyle="low":""==t.order&&(this.sortName="",this.sortStyle),this.getAgencysellList()):(this.sortName="",this.sortStyle="",this.getAgencysellList())},tabChnage:function(t,e){var a=t.name;"first"==a&&0==this.holderReportData.length?this.getHolderReportList():"second"==a&&0==this.aggencySellData.length&&this.getAgencysellList()},getHolderReportList:function(){var t=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dCDate:this.holderDate,cFundCode:this.cFundCode,sortStyle:this.sortStyle,sortName:this.sortName};o.a.post("/crm/fund/selectFundHolderReport",e).then(function(e){"0000"==e.code&&(t.holderReportData=e.data.list,t.tableHet0=window.innerHeight-150),t.loading.close()}).catch(function(e){t.loading.close()})},getAgencysellList:function(){var t=this;this.loading=this.$loading({lock:!0,text:"正在加载...",spinner:"",background:"rgba(255, 255, 255, 0.6)"});var e={token:this.getLocalStorage("token"),h5loginusername:this.getLocalStorage("username"),dCDate:this.agencyDate,cFundCode:this.cFundCode,sortStyle:this.sortStyle,sortName:this.sortName,page:this.currPage,limit:this.pageSize};o.a.post("/crm/fund/selectFundAgency",e).then(function(e){"0000"==e.code&&(t.tableHet=window.innerHeight-45-40-40-20-32,t.aggencySellData=e.data.list,t.totalSize=e.data.totalCount,t.saleTotalStaticObj.fLastshareSum=e.data.fLastshareSum,t.saleTotalStaticObj.fLastassetSum=e.data.fLastassetSum,console.log(t.saleTotalStaticObj)),t.loading.close()}).catch(function(e){t.loading.close()})},listenUnitChange:function(t){this.currencyUnit=t,this.setLocalStorage("unit",t)},DateChange1:function(t){this.holderDate=this.standardTime(t),this.getHolderReportList()},DateChange2:function(t){this.agencyDate=this.standardTime(t),this.currPage=1,this.getAgencysellList()},routerBack:function(){this.$router.go("-1")},handleCurrentChange:function(t){this.currPage=t,this.getAgencysellList()},handleSizeChange:function(t){this.pageSize=t,this.getAgencysellList()}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-home-detail"},[s("div",{staticClass:"detail-main padL10 padR10"},[s("span",{staticClass:"detail-main-back",on:{click:t.routerBack}},[s("img",{staticClass:"back-icon",attrs:{src:a("0YUB"),alt:""}})]),t._v(" "),s("el-tabs",{on:{"tab-click":t.tabChnage},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("currency-unit",{staticStyle:{float:"right"},attrs:{defaultCurrencyUnit:t.currencyUnit},on:{listenUnitChange:t.listenUnitChange}}),t._v(" "),s("el-tab-pane",{attrs:{label:"持有人名册",name:"first"}},[s("div",{staticClass:"header-con"},[s("div",{staticClass:"hidden header"},[s("span",{staticClass:"left ft18 linehet45 blod"},[t._v(t._s(t.cFundName)+"前20大持有人")]),t._v(" "),s("span",{staticClass:"right"},[s("el-date-picker",{staticClass:"datepicker withoutBorder",attrs:{type:"date",placeholder:"选择日期"},on:{change:t.DateChange1},model:{value:t.holderDate,callback:function(e){t.holderDate=e},expression:"holderDate"}})],1)])]),t._v(" "),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.holderReportData,"max-height":t.tableHet0,"summary-method":t.getSummaries,"show-summary":""},on:{"sort-change":t.sortMethod}},[s("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"cCustname",label:"账户名称",align:"center",sortable:"custom"}}),t._v(" "),s("el-table-column",{attrs:{property:"cAgencyNo",label:"销售商",align:"center",sortable:"custom"}}),t._v(" "),s("el-table-column",{attrs:{property:"fLastshare",label:"份额余额",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.numFormat(e.row.fLastshare/t.currencyUnit)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fLastasset",label:"最新市值",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.numFormat(e.row.fLastasset/t.currencyUnit)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fPercent",label:"占比(%)",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.numFormat(e.row.fPercent)))])]}}])})],1)],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"销售渠道",name:"second"}},[s("div",{staticClass:"header-con"},[s("div",{staticClass:"hidden header"},[s("span",{staticClass:"left ft18 linehet45 blod"},[t._v(t._s(t.cFundName)+"渠道业务情况")]),t._v(" "),s("span",{staticClass:"right"},[s("el-date-picker",{staticClass:"datepicker withoutBorder",attrs:{type:"date",placeholder:"选择日期"},on:{change:t.DateChange2},model:{value:t.agencyDate,callback:function(e){t.agencyDate=e},expression:"agencyDate"}})],1)])]),t._v(" "),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:t.aggencySellData,"max-height":t.tableHet,"summary-method":t.getSummaries2,"show-summary":""},on:{"sort-change":t.sortMethod2}},[s("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"cAgencyNo",label:"销售商",align:"center",sortable:"custom"}}),t._v(" "),s("el-table-column",{attrs:{property:"fLastshare",label:"份额余额",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.numFormat(e.row.fLastshare/t.currencyUnit)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fLastasset",label:"最新市值",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.numFormat(e.row.fLastasset/t.currencyUnit)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"fPercent",label:"占比(%)",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.numFormat(e.row.fPercent)))])]}}])})],1)],1),t._v(" "),t.aggencySellData.length>0?s("div",{staticClass:"pag-con"},[s("el-pagination",{attrs:{"page-sizes":[15,30,50],"page-size":t.pageSize,"current-page":t.currPage,layout:"prev, pager, next, sizes",background:"",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])],1)],1)])},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("gkzM")},"data-v-420ac5b4",null);e.default=u.exports},gkzM:function(t,e){}});